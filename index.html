<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Основные SEO теги -->
    <title>Crypto Insights - Real-time Cryptocurrency Analytics & Trading Signals</title>
    <meta name="description" content="Track Bitcoin, Ethereum, Solana & altcoins with real-time analytics: liquidations, funding rates, open interest, volume. Professional trading tools for Binance, Bybit, OKX.">
    <meta name="keywords" content="crypto analytics, cryptocurrency dashboard, bitcoin price, ethereum chart, solana signals, trading indicators, liquidation heatmap, funding rate tracker, open interest crypto, volume analysis, binance tools, bybit signals">
    <meta name="author" content="Crypto Analyst">
    <meta name="robots" content="index, follow">
    <meta name="theme-color" content="#0f172a">

    <!-- Ukrainian Meta Tags -->
    <meta name="description" lang="uk" content="Відстежуйте Bitcoin, Ethereum, Solana та інші альткоїни в реальному часі: ліквідації, ставки фінансування, відкритий інтерес, обсяг. Професійні торгові інструменти для Binance, Bybit, OKX.">
    <meta name="keywords" lang="uk" content="крипто аналітика, криптовалютна панель, ціна біткоїна, графік ефіру, сигнали solana, торгові індикаторы, heatmap ліквідацій, трекер фінансування, відкритий інтерес, аналіз обсягу, інструменти binance, сигнали bybit">
    
    <!-- Russian Meta Tags -->
    <meta name="description" lang="ru" content="Отслеживайте Bitcoin, Ethereum, Solana и альткоины с аналитикой в реальном времени: ликвидации, funding, открытый интерес, объемы. Проф. инструменты для Binance, Bybit, OKX.">
    <meta name="keywords" lang="ru" content="крипто аналитика, криптовалютная панель, цена биткоина, график эфира, сигналы solana, торговые индикаторы, карта ликвидаций, funding tracker, open interest, анализ объемов, инструменты binance, сигналы bybit">

    <!-- Open Graph / Social Media -->
    <meta property="og:title" content="Crypto Insights - Professional Cryptocurrency Dashboard">
    <meta property="og:description" content="Real-time crypto analytics: liquidations, funding, order depth, OI, volume. Track BTC, ETH, SOL with professional trading tools.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://crypto-analyst-ua.github.io/crypto-insights/">
    <meta property="og:image" content="https://crypto-analyst-ua.github.io/crypto-insights/seo-image.jpg">
    <meta property="og:site_name" content="Crypto Insights">
    <meta property="og:locale" content="en_US">
    <meta property="og:locale:alternate" content="uk_UA">
    <meta property="og:locale:alternate" content="ru_RU">

    <!-- Twitter Cards -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Crypto Insights - Real-time Market Analytics">
    <meta name="twitter:description" content="Professional crypto dashboard: liquidations, funding rates, order book depth & trading signals for Bitcoin and altcoins.">
    <meta name="twitter:image" content="https://crypto-analyst-ua.github.io/crypto-insights/twitter-card.jpg">
    <meta name="twitter:creator" content="@CryptoAnalystUA">
    
    <!-- Ukrainian Twitter Cards -->
    <meta name="twitter:title" lang="uk" content="Crypto Insights — Аналітика крипторинку онлайн">
    <meta name="twitter:description" lang="uk" content="Професійна панель для криптотрейдерів: ліквідації, ставки фінансування, обсяг, глибина ордербуку та торгові сигнали.">
    
    <!-- Russian Twitter Cards -->
    <meta name="twitter:title" lang="ru" content="Crypto Insights — Криптоанализ онлайн">
    <meta name="twitter:description" lang="ru" content="Профессиональная панель для криптотрейдинга: ликвидации, funding ставки, глубина рынка и сигналы по криптовалютам.">

    <!-- Канонические и альтернативные ссылки -->
    <link rel="canonical" href="https://crypto-analyst-ua.github.io/crypto-insights/">
    <link rel="alternate" hreflang="en" href="https://crypto-analyst-ua.github.io/crypto-insights/">
    <link rel="alternate" hreflang="uk" href="https://crypto-analyst-ua.github.io/crypto-insights/uk/">
    <link rel="alternate" hreflang="ru" href="https://crypto-analyst-ua.github.io/crypto-insights/ru/">

    <!-- Структурированные данные (Schema.org) -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "Crypto Insights",
      "url": "https://crypto-analyst-ua.github.io/crypto-insights/",
      "description": "Real-time cryptocurrency analytics dashboard with trading tools",
      "applicationCategory": "FinancialApplication",
      "operatingSystem": "Web",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "author": {
        "@type": "Organization",
        "name": "Crypto Analyst"
      },
      "screenshot": "https://crypto-analyst-ua.github.io/crypto-insights/screenshot.jpg",
      "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "4.8",
        "reviewCount": "24"
      }
    }
    </script>
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://crypto-analyst-ua.github.io/crypto-insights/">
    
    <!-- Favicon -->
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    
    <!-- Styles & Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://unpkg.com/lightweight-charts@4.1.1/dist/lightweight-charts.standalone.production.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-P5MEC4X2BQ"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-P5MEC4X2BQ');
    </script>

    <style>
        :root {
            --bg-primary: #0f172a;
            --bg-secondary: #1e293b;
            --bg-card: #334155;
            --text-primary: #f1f5f9;
            --text-secondary: #cbd5e1;
            --indicator-up: #22c55e;
            --indicator-down: #ef4444;
            --indicator-neutral: #94a3b8;
            
            /* Новые переменные для тепловой карты */
            --heatmap-text: #f1f5f9;
            --heatmap-border: #334155;
            --heatmap-bg-up: linear-gradient(135deg, rgba(110, 231, 183, 0.3), rgba(40, 167, 69, 0.4));
            --heatmap-bg-down: linear-gradient(135deg, rgba(248, 113, 113, 0.3), rgba(220, 38, 38, 0.4));
        }

        .light {
            --bg-primary: #f1f5f9;
            --bg-secondary: #e2e8f0;
            --bg-card: #ffffff;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            
            /* Переменные для светлой темы */
            --heatmap-text: #1e293b;
            --heatmap-border: #e2e8f0;
            --heatmap-bg-up: linear-gradient(135deg, rgba(34, 197, 94, 0.2), rgba(22, 101, 52, 0.3));
            --heatmap-bg-down: linear-gradient(135deg, rgba(239, 68, 68, 0.2), rgba(153, 27, 27, 0.3));
        }

        body {
            background-color: var(--bg-primary);
            color: var(--text-primary);
            transition: background-color 0.3s, color 0.3s;
            font-family: 'Inter', sans-serif;
        }

        .card {
            background-color: var(--bg-card);
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s, box-shadow 0.2s;
            padding: 1.5rem;
        }

        .card:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }

        .fear-greed-container {
            background: linear-gradient(90deg, 
                #ef4444 0%, 
                #f59e0b 20%, 
                #eab308 40%, 
                #84cc16 60%, 
                #22c55e 80%, 
                #16a34a 100%);
            height: 1.25rem;
            border-radius: 0.625rem;
            position: relative;
            margin: 0.625rem 0;
        }

        .fear-greed-indicator {
            position: absolute;
            height: 1.5rem;
            width: 0.25rem;
            background: white;
            top: -0.125rem;
            transform: translateX(-50%);
            box-shadow: 0 0 0.1875rem rgba(0,0,0,0.3);
            transition: left 0.5s ease-in-out;
            z-index: 10;
        }

        .token-icon {
            width: 1.5rem;
            height: 1.5rem;
            margin-right: 0.5rem;
            vertical-align: middle;
            border-radius: 50%;
            background-color: var(--bg-secondary);
            object-fit: contain;
        }

        .mini-chart {
            width: 100%;
            height: 40px;
        }

        /* Улучшенные стили для модального окна */
        .modal-content {
            background: var(--bg-card);
            color: var(--text-primary);
            border-radius: 0.75rem;
            padding: 1.5rem;
            max-width: 95vw;
            max-height: 95vh;
            overflow: auto;
            position: relative;
            width: 95%; /* По умолчанию для мобильных */
        }

        .modal-chart-container {
            position: relative;
            height: 60vh; /* Адаптивная высота */
            min-height: 300px; /* Минимальная высота */
            max-height: 600px; /* Максимальная высота */
            background: var(--bg-secondary);
            border-radius: 0.5rem;
            overflow: hidden;
        }

        .support { color: var(--indicator-up); }
        .resistance { color: var(--indicator-down); }

        .timeframe-btn {
            background-color: var(--bg-secondary);
            color: var(--text-primary);
            border-radius: 0.25rem;
            transition: all 0.2s;
            min-width: 2.5rem;
            text-align: center;
            margin: 0.0625rem;
            padding: 0.125rem 0.25rem;
            font-size: 0.75rem;
        }

        .timeframe-btn:hover {
            background-color: #3b82f6;
            transform: scale(1.05);
        }

        .timeframe-btn.active {
            background-color: #3b82f6;
            box-shadow: 0 0 0.25rem rgba(59, 130, 246, 0.5);
        }

        .rsi-label {
            position: absolute;
            right: 0.625rem;
            top: 0.625rem;
            color: #FF6B6B;
            font-size: 0.75rem;
            z-index: 100;
            background: rgba(0, 0, 0, 0.7);
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
        }

        .volume-bar {
            position: absolute;
            bottom: 0;
            height: 3px;
            background-color: rgba(59, 130, 246, 0.6);
            transition: width 0.3s;
        }
        
        .tab {
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
        }
        
        .tab.active {
            background-color: #3b82f6;
            color: white;
        }
        
        .page {
            display: none;
        }
        
        .page.active {
            display: block;
        }
        
        .liquidation-bar {
            height: 4px;
            position: absolute;
            bottom: 0;
            transition: width 0.3s;
        }
        
        .long-liquidation {
            background-color: rgba(239, 68, 68, 0.7);
        }
        
        .short-liquidation {
            background-color: rgba(34, 197, 94, 0.7);
        }
        
        .portfolio-item {
            border-bottom: 1px solid var(--bg-secondary);
            padding: 0.75rem 0;
        }
        
        .position-calculator {
            background-color: var(--bg-secondary);
            border-radius: 0.5rem;
            padding: 1rem;
            margin-top: 1rem;
        }
        
        .calculator-input {
            background-color: var(--bg-secondary);
            border: 1px solid #475569;
            border-radius: 0.375rem;
            padding: 0.5rem;
            color: var(--text-primary);
            width: 100%;
        }
        
        .notification {
            position: fixed;
            top: 1rem;
            right: 1rem;
            z-index: 1000;
            max-width: 350px;
            animation: slideIn 0.3s ease-out;
        }
        
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .mini-chart-container {
            position: relative;
            height: 3rem;
            margin-top: 0.5rem;
        }
        
        .mini-chart-price-info {
            display: flex;
            justify-content: space-between;
            font-size: 0.75rem;
            margin-top: 0.25rem;
        }
        
        .mini-chart-high {
            color: var(--indicator-up);
        }
        
        .mini-chart-low {
            color: var(--indicator-down);
        }
        
        .theme-btn {
            background: var(--bg-secondary);
            border-radius: 50%;
            width: 2.5rem;
            height: 2.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        @keyframes pulse {
            0% { opacity: 0.6; }
            50% { opacity: 1; }
            100% { opacity: 0.6; }
        }
        
        .loading-pulse {
            animation: pulse 1.5s infinite;
        }
        
        .rsi-value {
            font-weight: bold;
        }
        .rsi-overbought { color: #ef4444; }
        .rsi-oversold { color: #22c55e; }
        .rsi-neutral { color: #94a3b8; }
        
        .mini-chart-range-area {
            position: absolute;
            top: 0;
            bottom: 0;
            background: rgba(59, 130, 246, 0.1);
            z-index: 0;
        }
        
        .mini-chart-support-line, 
        .mini-chart-resistance-line {
            position: absolute;
            left: 0;
            right: 0;
            height: 1px;
            z-index: 1;
        }
        
        .mini-chart-support-line {
            border-top: 1px dashed var(--indicator-up);
        }
        
        .mini-chart-resistance-line {
            border-top: 1px dashed var(--indicator-down);
        }
        
        .error-message {
            color: #ef4444;
            background: rgba(239, 68, 68, 0.1);
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            text-align: center;
        }
        
        .asset-selector {
            max-height: 300px;
            overflow-y: auto;
        }
        
        .asset-item {
            display: flex;
            align-items: center;
            padding: 8px 12px;
            cursor: pointer;
            border-radius: 6px;
            transition: background-color 0.2s;
        }
        
        .asset-item:hover {
            background-color: var(--bg-secondary);
        }
        
        .asset-item img {
            width: 24px;
            height: 24px;
            margin-right: 10px;
        }
        
        .light .theme-btn {
            background: #e2e8f0;
        }
        
        .light .card {
            background-color: var(--bg-card);
            color: var(--text-primary);
        }
        
        .light table {
            background-color: var(--bg-card);
            color: var(--text-primary);
        }
        
        .light .modal-content {
            background-color: var(--bg-card);
            color: var(--text-primary);
        }
        
        .light .timeframe-btn {
            background-color: var(--bg-secondary);
            color: var(--text-primary);
        }

        /* Стили для выпадающих списков токенов */
        .relative {
            position: relative;
        }
        
        .absolute {
            position: absolute;
            z-index: 20;
        }
        
        .max-h-60 {
            max-height: 15rem;
            overflow-y: auto;
        }
        
        .hidden {
            display: none;
        }
        
        .token-selector-item {
            display: flex;
            align-items: center;
            padding: 8px 12px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .token-selector-item:hover {
            background-color: var(--bg-secondary);
        }
        
        .token-selector-item img {
            width: 24px;
            height: 24px;
            margin-right: 10px;
            border-radius: 50%;
            object-fit: contain;
        }
        
        /* Стили для кнопок навигации */
        .nav-btn {
            padding: 0.5rem 0.8rem;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            font-size: 0.8rem;
            white-space: nowrap;
            flex-shrink: 0;
        }

        .nav-btn i {
            margin-right: 0.3rem;
            font-size: 0.8rem;
        }

        .liquidations-btn { background-color: #ef4444; color: white; }
        .funding-btn { background-color: #3b82f6; color: white; }
        .order-depth-btn { background-color: #8b5cf6; color: white; }
        .domination-btn { background-color: #f59e0b; color: white; }
        .dex-explorer-btn { background-color: #0ea5e9; color: white; }
        .support-btn { background-color: #ec4899; color: white; }
        /* Новая кнопка Token List */
        .token-list-btn { background-color: #0d9488; color: white; }
        .token-list-btn:hover { background-color: #0f766e; }

        .nav-btn:hover {
            transform: translateY(-2px);
        }

        .liquidations-btn:hover { background-color: #dc2626; }
        .funding-btn:hover { background-color: #2563eb; }
        .order-depth-btn:hover { background-color: #7c3aed; }
        .domination-btn:hover { background-color: #d97706; }
        .dex-explorer-btn:hover { background-color: #0284c7; }
        .support-btn:hover { background-color: #db2777; }
        .token-list-btn:hover { background-color: #0f766e; }
        
        /* Стили для шапки с логотипом */
        .logo-text {
            font-family: 'Arial', sans-serif;
            text-transform: uppercase;
            text-align: center;
        }
        
        .logo-text span:first-child {
            font-size: 1.5rem;
            font-weight: 700;
            letter-spacing: 1px;
            color: white;
        }
        
        .logo-text span:last-child {
            font-size: 0.75rem;
            font-weight: 500;
            letter-spacing: 2px;
            color: #60a5fa;
            margin-top: -3px;
            display: block;
        }

        /* Новый стиль для кнопки 24h Volume */
        .volume-btn {
            background-color: #0d9488;
            color: white;
        }
        .volume-btn:hover {
            background-color: #0f766e;
        }
        
        /* Новый стиль для кнопки Open Interest */
        .open-interest-btn {
            background-color: #6366f1;
            color: white;
        }
        .open-interest-btn:hover {
            background-color: #4f46e5;
        }
        
        /* Стиль для новой кнопки Alpha Tracker PRO */
        .alpha-tracker-btn {
            background: linear-gradient(135deg, #8a2be2, #4b0082);
            color: white;
            position: relative;
            overflow: hidden;
        }
        
        .alpha-tracker-btn:hover {
            background: linear-gradient(135deg, #7a1bd2, #3a0072);
            transform: translateY(-2px);
        }
        
        .alpha-tracker-btn::after {
            content: "PRO";
            position: absolute;
            top: -8px;
            right: -8px;
            background: gold;
            color: black;
            font-size: 0.6rem;
            font-weight: bold;
            padding: 2px 5px;
            border-radius: 3px;
            transform: rotate(15deg);
        }

        /* Крестик в светлой теме */
        .light .modal-content #closeModal {
            color: #1e293b !important;
        }

        /* Ссылки бирж в светлой теме */
        .light .referral-links a {
            background-color: white !important;
            color: black !important;
            border: 1px solid #e2e8f0 !important;
        }

        .light .referral-links a:hover {
            background-color: #f1f5f9 !important;
        }

        /* Новые стили для подсказок и таблицы */
        .tooltip {
            position: relative;
            cursor: pointer;
        }
        
        .tooltip:hover::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 5px 10px;
            border-radius: 4px;
            white-space: nowrap;
            font-size: 12px;
            z-index: 100;
        }

        .support-cell { color: var(--indicator-up); }
        .resistance-cell { color: var(--indicator-down); }

        /* Новые стили для кнопок NFT и Airdrop */
        .nft-explorer-btn {
            background-color: #a855f7;
            color: white;
        }
        .nft-explorer-btn:hover {
            background-color: #9333ea;
            transform: translateY(-2px);
        }
        
        .airdrop-radar-btn {
            background-color: #f97316;
            color: white;
        }
        .airdrop-radar-btn:hover {
            background-color: #ea580c;
            transform: translateY(-2px);
        }
        
        /* Новая кнопка DeFi */
        .defi-btn {
            background-color: #0d9488;
            color: white;
        }
        .defi-btn:hover {
            background-color: #0f766e;
            transform: translateY(-2px);
        }

        /* Стили для нового футера */
        .footer-container {
            padding: 1.5rem 1rem;
            margin-top: 2rem;
            border-top: 1px solid var(--bg-secondary);
            color: var(--text-secondary);
        }
        
        .footer-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .footer-column h3 {
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--text-primary);
            font-size: 1.1rem;
        }
        
        .footer-column p {
            font-size: 0.85rem;
            line-height: 1.5;
        }
        
        .footer-bottom {
            text-align: center;
            padding-top: 1.5rem;
            margin-top: 1.5rem;
            border-top: 1px solid var(--bg-secondary);
            font-size: 0.8rem;
        }
        
        .footer-links {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 1rem;
            margin-bottom: 0.5rem;
        }
        
        .footer-links a {
            color: var(--text-secondary);
            transition: color 0.2s;
            font-size: 0.8rem;
        }
        
        .footer-links a:hover {
            color: #3b82f6;
            text-decoration: underline;
        }

        /* Стили для реферального баннера */
        .referral-banner {
            max-width: 360px;
            width: 100%;
            padding: 20px;
            background: linear-gradient(135deg, #1f2937, #111827);
            border-radius: 16px;
            text-align: center;
            box-shadow: 0 0 12px rgba(0, 0, 0, 0.5);
            transition: all 0.3s ease;
            margin: 1.5rem auto;
        }

        .referral-banner:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
        }

        .referral-banner a {
            text-decoration: none;
            color: white;
            display: block;
            animation: fadeIn 0.8s ease-in-out;
        }

        .exchange-name, .bonus-text {
            transition: opacity 0.3s ease;
        }

        .banner-text-hidden {
            opacity: 0;
            transform: translateY(10px);
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Обновленные стили для тепловой карты */
        .heatmap-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(90px, 1fr));
            gap: 8px;
            margin-bottom: 20px;
            background-color: var(--bg-primary);
            padding: 5px;
            border-radius: 12px;
        }

        .heatmap-cell {
            padding: 12px 8px;
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.16);
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 90px;
            border: 1px solid var(--heatmap-border);
        }

        .heatmap-cell:hover {
            transform: translateY(-5px);
            box-shadow: 0 7px 14px rgba(0, 0, 0, 0.25);
            z-index: 10;
        }

        .heatmap-token {
            font-weight: 700;
            font-size: 14px;
            margin-bottom: 6px;
            letter-spacing: 0.5px;
            color: var(--heatmap-text);
        }

        .heatmap-price {
            font-weight: 600;
            font-size: 13px;
            margin-bottom: 6px;
            color: var(--text-secondary);
        }

        .heatmap-change {
            font-weight: 700;
            font-size: 12px;
            padding: 3px 6px;
            border-radius: 4px;
            display: inline-block;
        }
        
        .dark .heatmap-change {
            font-weight: 700;
        }

        .heatmap-volume-bar {
            position: absolute;
            bottom: 0;
            left: 0;
            height: 4px;
            border-radius: 0 0 10px 10px;
            transition: width 0.5s ease;
        }

        /* Индикатор тренда */
        .trend-indicator {
            position: absolute;
            top: 8px;
            right: 8px;
            width: 0;
            height: 0;
            border-style: solid;
        }

        /* Адаптация для мобильных */
        @media (max-width: 768px) {
            .header-container {
                flex-direction: column;
                gap: 1rem;
            }
            
            .controls-group {
                width: 100%;
            }
            
            .fear-greed-group {
                width: 100%;
                order: 3;
                margin-top: 1rem;
            }
            
            .heatmap-container {
                grid-template-columns: repeat(5, 1fr);
            }
            
            .cards-container {
                grid-template-columns: 1fr;
            }
            
            .modal-content {
                width: 95%;
                padding: 0.5rem;
            }
            
            .modal-chart-container {
                height: 50vh;
                max-height: 500px;
            }
            
            .tab-container {
                flex-wrap: wrap;
                gap: 0.5rem;
            }
            
            .tab {
                padding: 0.5rem 1rem;
                font-size: 0.875rem;
                flex: 1;
                min-width: max-content;
                text-align: center;
            }
            
            .asset-selector {
                max-height: 200px;
            }
            
            .nav-btn {
                padding: 0.5rem 1rem;
                font-size: 0.875rem;
                width: 100%;
            }
            
            .fear-greed-container {
                width: 100%;
            }
            
            /* Оптимизация таблиц */
            table {
                font-size: 0.8rem;
            }
            
            .table-container {
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
            }
            
            .portfolio-grid {
                grid-template-columns: 1fr;
            }
            
            .tools-grid {
                grid-template-columns: 1fr;
            }
            
            .modal-details-grid {
                grid-template-columns: 1fr;
            }
            
            /* Адаптация логотипа */
            .logo-text span:first-child {
                font-size: 1.3rem;
                letter-spacing: 0.5px;
            }
            
            .logo-text span:last-child {
                font-size: 0.65rem;
            }
            
            /* Футер на мобильных */
            .footer-grid {
                grid-template-columns: 1fr;
            }
            
            .footer-column {
                margin-bottom: 1.5rem;
            }
        }
        
        @media (max-width: 480px) {
            .card {
                padding: 1rem;
            }
            
            .tab-container {
                flex-direction: column;
            }
            
            .tab {
                width: 100%;
            margin-bottom: 0.25rem;
            }
            
            .heatmap-container {
                grid-template-columns: repeat(4, 1fr);
            }
            
            .modal-chart-container {
                height: 40vh;
                max-height: 400px;
            }
            
            .referral-links {
                flex-wrap: wrap;
                gap: 0.5rem;
            }
            
            /* Адаптация логотипа */
            .logo {
                margin: 0 auto;
            }
            
            /* Футер на маленьких экранах */
            .footer-links {
                flex-direction: column;
                align-items: center;
                gap: 0.5rem;
            }
        }

        @media (min-width: 1024px) {
            .modal-content {
                width: 90%;
            }
        }

        @media (min-width: 1280px) {
            .modal-content {
                width: 85%;
            }
        }

        @media (min-width: 1536px) {
            .modal-content {
                width: 80%;
            }
        }
    </style>
</head>
<body class="min-h-screen p-4">
    <!-- Шапка с логотипом -->
    <header class="flex items-center justify-center md:justify-start mb-6">
        <div class="logo flex items-center">
            <div class="logo-text flex flex-col leading-tight">
                <span>Crypto Insights</span>
                <span>Real-time Market Analytics</span>
            </div>
        </div>
    </header>

    <!-- Навигация с новой кнопкой Alpha Tracker PRO -->
    <div class="flex mb-4 gap-2 tab-container flex-wrap">
        <div class="tab active" data-page="market">
            <i class="fas fa-chart-line mr-2"></i><span data-translate="market_overview">Market Overview</span>
        </div>
        <div class="tab" data-page="portfolio">
            <i class="fas fa-wallet mr-2"></i><span data-translate="portfolio_title">Portfolio</span>
        </div>
        <div class="tab" data-page="tools">
            <i class="fas fa-tools mr-2"></i><span data-translate="tools_title">Tools</span>
        </div>
        
        <!-- Кнопки навигации с классом nav-btn -->
        <a href="Liquidations.html" class="nav-btn liquidations-btn">
            <i class="fas fa-fire"></i>
            <span data-translate="liquidations_title">Liquidations</span>
        </a>
        
        <a href="funding_rate.html" class="nav-btn funding-btn">
            <i class="fas fa-percentage"></i>
            <span data-translate="funding_rate_title">Funding</span>
        </a>
        
        <a href="Order_Depth.html" class="nav-btn order-depth-btn">
            <i class="fas fa-layer-group"></i>
            <span data-translate="order_depth_title">Order Depth</span>
        </a>
        
        <a href="DOMINATION.html" class="nav-btn domination-btn">
            <i class="fas fa-chart-pie"></i>
            <span data-translate="domination_title">DOM</span>
        </a>
        
        <a href="DEX Explorer.html" class="nav-btn dex-explorer-btn">
            <i class="fas fa-code-branch"></i>
            <span data-translate="dex_explorer_title">DEX</span>
        </a>
        
        <!-- Кнопка Token List -->
        <a href="Token List.html" class="nav-btn token-list-btn">
            <i class="fas fa-list mr-2"></i>
            <span data-translate="token_list">Token List</span>
        </a>
        
        <!-- Кнопка Open Interest -->
        <a href="Open Interest.html" class="nav-btn open-interest-btn">
            <i class="fas fa-chart-area mr-2"></i>
            <span data-translate="open_interest">Open Interest</span>
        </a>
        
        <!-- Кнопка 24h Trading Volume -->
        <a href="24h Trading Volume.html" class="nav-btn volume-btn">
            <i class="fas fa-chart-bar mr-2"></i>
            <span data-translate="24h_volume">24h Volume</span>
        </a>
        
        <!-- Новая кнопка Alpha Tracker PRO -->
        <a href="Alpha Tracker PRO.html" class="nav-btn alpha-tracker-btn">
            <i class="fas fa-star mr-2"></i>
            <span data-translate="alpha_tracker_pro">Alpha Tracker PRO</span>
        </a>
        
        <!-- Новые кнопки NFT и Airdrop -->
        <a href="NFT.html" class="nav-btn nft-explorer-btn">
            <i class="fas fa-paint-brush mr-2"></i>
            <span data-translate="nft_explorer_title">NFT Explorer</span>
        </a>
        
        <a href="Airdrop.html" class="nav-btn airdrop-radar-btn">
            <i class="fas fa-gift mr-2"></i>
            <span data-translate="airdrop_radar_title">Airdrop Radar</span>
        </a>
        
        <!-- Новая кнопка DeFi -->
        <a href="DeFi.html" class="nav-btn defi-btn">
            <i class="fas fa-coins mr-2"></i>
            <span data-translate="defi_title">DeFi</span>
        </a>
        
        <a href="Sponsor.html" class="nav-btn support-btn">
            <i class="fas fa-heart"></i>
            <span data-translate="support_project">Support</span>
        </a>
    </div>

    <!-- Реферальный баннер после навигации -->
    <div class="flex justify-center">
        <div class="referral-banner">
            <a href="#" target="_blank" id="rotatingLink" class="block">
                <div class="exchange-name" id="exchangeName">Завантаження...</div>
                <div class="bonus-text" id="exchangeBonus">Перевір бонус!</div>
            </a>
        </div>
    </div>

    <!-- Страница: Обзор рынка -->
    <div id="market" class="page active">
        <div class="mb-4 flex flex-wrap items-center justify-between gap-3 header-container">
            <div class="flex items-center gap-2 flex-wrap controls-group">
                <button id="viewToggle" class="bg-indigo-600 px-4 py-2 rounded-lg hover:bg-indigo-700 transition">
                    <i class="fas fa-table mr-2"></i><span id="viewToggleText" data-translate="view_cards">Card View</span>
                </button>
                <select id="filter-select" class="bg-gray-800 text-white p-2 rounded-lg">
                    <option value="all" data-translate="all">All</option>
                    <option value="winners" data-translate="winners">Top Gainers</option>
                    <option value="losers" data-translate="losers">Top Losers</option>
                    <option value="favorites" data-translate="favoritesFilter">Favorites</option>
                </select>
                <input id="searchInput" placeholder="Search..." class="p-2 rounded-lg bg-gray-800 text-white w-32 md:w-48">
                <button id="themeToggle" class="theme-btn">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z" />
                    </svg>
                </button>
            </div>
            <div class="flex items-center gap-4 flex-wrap fear-greed-group">
                <div class="w-48">
                    <div class="fear-greed-container">
                        <div class="fear-greed-indicator" id="fearGreedIndicator"></div>
                    </div>
                    <div class="fear-greed-label text-sm flex items-center justify-between">
                        <span id="fearGreedValue">--</span>
                        <span id="fearGreedText"></span>
                    </div>
                </div>
                <select id="languageSelect" class="bg-gray-800 text-white p-2 rounded-lg">
                    <option value="en" selected>English</option>
                    <option value="ua">Українська</option>
                    <option value="ru">Русский</option>
                </select>
            </div>
        </div>

        <div class="mb-4">
            <div class="flex items-center gap-2 mb-2 flex-wrap">
                <button id="heatmapVolumeBtn" class="bg-blue-600 px-3 py-1 rounded-lg hover:bg-blue-700 transition" data-translate="volume">Volume</button>
                <button id="heatmapChangeBtn" class="bg-purple-600 px-3 py-1 rounded-lg hover:bg-purple-700 transition" data-translate="priceChange">Price Change</button>
            </div>
            <div id="heatmap-container" class="heatmap-container"></div>
        </div>

        <div id="loading" class="text-center py-4 hidden" data-translate="loading">Loading...</div>
        <div id="cards-container" class="grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 hidden"></div>
        <div id="table-container" class="overflow-x-auto">
            <table class="min-w-full bg-gray-800 rounded-lg">
                <thead>
                    <tr>
                        <th class="px-4 py-2 text-left" data-translate="token">Token</th>
                        <th class="px-4 py-2 text-right" data-translate="price">Price</th>
                        <th class="px-4 py-2 text-right" data-translate="change">Change</th>
                        <th class="px-4 py-2 text-right" data-translate="volume">Volume</th>
                        <th class="px-4 py-2 text-right support-cell" data-translate="support">Support</th>
                        <th class="px-4 py-2 text-right resistance-cell" data-translate="resistance">Resistance</th>
                        <th class="px-4 py-2 text-center" data-translate="favorites">Favorites</th>
                    </tr>
                </thead>
                <tbody id="table-body"></tbody>
            </table>
        </div>

        <div class="mb-4">
            <h3 class="text-lg font-bold mb-2" data-translate="news">Crypto News</h3>
            <div id="news-container" class="grid gap-2">
                <div class="bg-gray-800 p-3 rounded-lg mb-2 loading-pulse">
                    <div class="h-5 bg-gray-700 rounded w-3/4"></div>
                    <div class="h-4 bg-gray-700 rounded w-1/2 mt-2"></div>
                </div>
                <div class="bg-gray-800 p-3 rounded-lg mb-2 loading-pulse">
                    <div class="h-5 bg-gray-700 rounded w-2/3"></div>
                    <div class="h-4 bg-gray-700 rounded w-1/2 mt-2"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Страница: Портфель -->
    <div id="portfolio" class="page">
        <div class="card mb-4">
            <h2 class="text-2xl font-bold mb-4"><i class="fas fa-wallet mr-2"></i><span data-translate="portfolio_title">My Portfolio</span></h2>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6 portfolio-grid">
                <div class="card p-4">
                    <h3 class="text-lg font-bold mb-2" data-translate="portfolio_value">Portfolio Value</h3>
                    <div class="text-3xl font-bold" id="portfolio-value">$--</div>
                    <div class="text-green-500 mt-1" id="portfolio-change">+0.00%</div>
                </div>
                
                <div class="card p-4">
                    <h3 class="text-lg font-bold mb-2" data-translate="portfolio_distribution">Distribution</h3>
                    <canvas id="portfolio-distribution" height="200"></canvas>
                </div>
                
                <div class="card p-4">
                    <h3 class="text-lg font-bold mb-2" data-translate="portfolio_history">Performance History</h3>
                    <canvas id="portfolio-history" height="200"></canvas>
                </div>
            </div>
            
            <div class="card p-4 mb-4">
                <h3 class="text-lg font-bold mb-4" data-translate="my_assets">My Assets</h3>
                <div id="portfolio-list" class="max-h-96 overflow-y-auto">
                    <!-- Список активов будет здесь -->
                </div>
                
                <button id="add-asset-btn" class="mt-4 bg-indigo-600 hover:bg-indigo-700 px-4 py-2 rounded-lg w-full">
                    <i class="fas fa-plus mr-2"></i><span data-translate="add_asset">Add Asset</span>
                </button>
            </div>
            
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-4">
                <div class="card p-4">
                    <h3 class="text-lg font-bold mb-4" data-translate="active_alerts">Active Alerts</h3>
                    <div id="alerts-list" class="max-h-80 overflow-y-auto">
                        <!-- Список алертов будет здесь -->
                    </div>
                </div>
                
                <div class="card p-4">
                    <h3 class="text-lg font-bold mb-4" data-translate="add_alert">Add Alert</h3>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium mb-1" data-translate="token">Token</label>
                            <div class="relative">
                                <input type="text" id="alert-asset-search" placeholder="Search token..." 
                                       class="calculator-input" data-translate="search_token">
                                <div id="alert-assets-list" class="absolute z-10 w-full bg-gray-700 mt-1 rounded max-h-60 overflow-y-auto hidden"></div>
                            </div>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium mb-1" data-translate="target_price">Target Price</label>
                            <input type="number" id="alert-price" class="calculator-input" placeholder="Enter price">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium mb-1" data-translate="condition">Condition</label>
                            <select id="alert-condition" class="calculator-input">
                                <option value="above" data-translate="above">Above</option>
                                <option value="below" data-translate="below">Below</option>
                            </select>
                        </div>
                        
                        <button id="add-alert-btn" class="mt-4 bg-indigo-600 hover:bg-indigo-700 px-4 py-2 rounded-lg w-full">
                            <i class="fas fa-bell mr-2"></i><span data-translate="add_alert_btn">Add Alert</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Страница: Инструменты -->
    <div id="tools" class="page">
        <div class="card mb-4">
            <h2 class="text-2xl font-bold mb-4"><i class="fas fa-tools mr-2"></i><span data-translate="tools_title">Professional Tools</span></h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6 tools-grid">
                <div class="card p-4">
                    <h3 class="text-lg font-bold mb-4" data-translate="position_calculator">Position Calculator</h3>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium mb-1" data-translate="entry_price">Entry Price ($)</label>
                            <input type="number" id="entry-price" class="calculator-input" placeholder="Enter price">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium mb-1" data-translate="exit_price">Exit Price ($)</label>
                            <input type="number" id="exit-price" class="calculator-input" placeholder="Enter price">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium mb-1" data-translate="position_size">Position Size</label>
                            <input type="number" id="position-size" class="calculator-input" placeholder="Enter size">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium mb-1" data-translate="leverage">Leverage</label>
                            <input type="number" id="leverage" class="calculator-input" value="1">
                        </div>
                        
                        <button id="calculate-btn" class="mt-4 bg-indigo-600 hover:bg-indigo-700 px-4 py-2 rounded-lg w-full">
                            <i class="fas fa-calculator mr-2"></i><span data-translate="calculate">Calculate</span>
                        </button>
                    </div>
                    
                    <div id="calculation-results" class="mt-4 space-y-2 hidden">
                        <div class="flex justify-between">
                            <span data-translate="pnl">PNL:</span>
                            <span id="pnl-result">$0.00</span>
                        </div>
                        <div class="flex justify-between">
                            <span data-translate="roi">ROI:</span>
                            <span id="roi-result">0.00%</span>
                        </div>
                        <div class="flex justify-between">
                            <span data-translate="fees">Fees:</span>
                            <span id="fees-result">$0.00</span>
                        </div>
                    </div>
                </div>
                
                <div class="card p-4">
                    <h3 class="text-lg font-bold mb-4" data-translate="risk_calculator">Risk Calculator</h3>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium mb-1" data-translate="capital_size">Capital Size ($)</label>
                            <input type="number" id="risk-capital" class="calculator-input" value="1000">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium mb-1" data-translate="risk_per_trade">Risk Per Trade (%)</label>
                            <input type="number" id="risk-per-trade" class="calculator-input" value="2">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium mb-1" data-translate="entry_price">Entry Price ($)</label>
                            <input type="number" id="risk-entry-price" class="calculator-input" placeholder="Enter price">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium mb-1" data-translate="stop_loss">Stop Loss ($)</label>
                            <input type="number" id="risk-stop-loss" class="calculator-input" placeholder="Enter price">
                        </div>
                        
                        <button id="calculate-risk-btn" class="mt-4 bg-indigo-600 hover:bg-indigo-700 px-4 py-2 rounded-lg w-full">
                            <i class="fas fa-calculator mr-2"></i><span data-translate="calculate">Calculate</span>
                        </button>
                    </div>
                    
                    <div id="risk-results" class="mt-4 space-y-2 hidden">
                        <div class="flex justify-between">
                            <span data-translate="position_size">Position Size:</span>
                            <span id="position-size-result">0.00</span>
                        </div>
                        <div class="flex justify-between">
                            <span data-translate="risk_amount">Risk Amount:</span>
                            <span id="risk-amount-result">$20.00</span>
                        </div>
                        <div class="flex justify-between">
                            <span data-translate="stop_distance">Stop Distance:</span>
                            <span id="stop-distance-result">0.00%</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="card p-4">
                <h3 class="text-lg font-bold mb-4" data-translate="volume_analysis">Volume Analysis</h3>
                <canvas id="volume-profile-chart" height="400"></canvas>
            </div>
        </div>
    </div>

    <!-- Модальное окно для деталей токена -->
    <div id="modal" class="fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center hidden z-50">
        <div class="modal-content">
            <button id="closeModal" aria-label="Close" class="absolute top-2 right-2 text-xl z-50 text-white dark:text-white">
                <svg aria-hidden="true" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                </svg>
            </button>
            <h2 id="modalTitle" class="text-xl font-bold mb-2 flex items-center gap-2"></h2>
            <div class="modal-chart-container">
                <div id="modalChartTV" style="height: 100%; width: 100%"></div>
                <div class="rsi-label">RSI: <span id="rsiValue" class="rsi-value">--</span></div>
            </div>
            <div class="mt-2 flex justify-between items-center flex-wrap gap-2 text-sm text-gray-300">
                <div id="supportText" class="order-1"></div>
                <div class="order-3 md:order-2 flex flex-wrap gap-1 justify-center">
                    <button data-tf="1m" class="timeframe-btn text-xs px-2 py-1" data-translate="tf_1m">1m</button>
                    <button data-tf="5m" class="timeframe-btn text-xs px-2 py-1" data-translate="tf_5m">5m</button>
                    <button data-tf="15m" class="timeframe-btn text-xs px-2 py-1 active" data-translate="tf_15m">15m</button>
                    <button data-tf="1h" class="timeframe-btn text-xs px-2 py-1" data-translate="tf_1h">1h</button>
                    <button data-tf="4h" class="timeframe-btn text-xs px-2 py-1" data-translate="tf_4h">4h</button>
                    <button data-tf="1d" class="timeframe-btn text-xs px-2 py-1" data-translate="tf_1d">1d</button>
                </div>
                <div class="order-2 md:order-3" id="resistanceText"></div>
                <button id="tradingViewBtn" class="order-4 bg-blue-600 hover:bg-blue-700 rounded px-3 py-1" data-translate="open_tradingview">Open in TradingView</button>
            </div>
            <div class="mt-4 text-sm">
                <div class="mb-2 grid grid-cols-1 md:grid-cols-2 gap-2 modal-details-grid">
                    <div>
                        <strong id="modalSupportLabel"></strong>
                    </div>
                    <div class="text-right">
                        <strong id="modalResistanceLabel"></strong>
                    </div>
                </div>
                <table class="w-full text-left text-sm bg-gray-700 rounded-lg overflow-hidden">
                    <tbody id="modalDetailsBody"></tbody>
                </table>
            </div>
            <div id="referralLinks" class="mt-3 flex flex-wrap gap-2 text-sm justify-center referral-links">
                <a href="https://bybit.com/ru-RU/invite?ref=3EVP8EE&utm_source=CryptoRadar" target="_blank" rel="noopener" class="bg-gray-700 hover:bg-gray-600 px-2 py-1 rounded">Bybit</a>
                <a href="https://okx.com/join/45675556?utm_source=CryptoRadar" target="_blank" rel="noopener" class="bg-gray-700 hover:bg-gray-600 px-2 py-1 rounded">OKX</a>
                <!-- Обновленная ссылка Binance -->
                <a href="https://www.binance.com/activity/referral-entry/CPA?ref=CPA_0036WCZERW" target="_blank" rel="noopener" class="bg-gray-700 hover:bg-gray-600 px-2 py-1 rounded">Binance</a>
                <a href="https://www.bitgetapp.com/ru/referral/register?clacCode=ZXCX2PKZ&utm_source=CryptoRadar" target="_blank" rel="noopener" class="bg-gray-700 hover:bg-gray-600 px-2 py-1 rounded">Bitget</a>
                <a href="https://www.kucoin.com/ucenter/signup?rcode=Z6CDCWDA&utm_source=c_k_share&utm_campaign=CryptoRadar" target="_blank" rel="noopener" class="bg-gray-700 hover:bg-gray-600 px-2 py-1 rounded">KuCoin</a>
                <!-- Новые реферальные ссылки -->
                <a href="https://promote.mexc.com/r/t6boLrCn" target="_blank" rel="noopener" class="bg-gray-700 hover:bg-gray-600 px-2 py-1 rounded">MEXC</a>
                <a href="https://bingx.com/invite/RUJECH/" target="_blank" rel="noopener" class="bg-gray-700 hover:bg-gray-600 px-2 py-1 rounded">BingX</a>
                <a href="https://weex.com/register?vipCode=6u4an" target="_blank" rel="noopener" class="bg-gray-700 hover:bg-gray-600 px-2 py-1 rounded">WEEX</a>
                <a href="https://www.bitmart.com/invite/cpRBXD/ru" target="_blank" rel="noopener" class="bg-gray-700 hover:bg-gray-600 px-2 py-1 rounded">BitMart</a>
                <a href="https://www.coinex.com/register?refer_code=t74ax&channel=Referral" target="_blank" rel="noopener" class="bg-gray-700 hover:bg-gray-600 px-2 py-1 rounded">CoinEx</a>
            </div>
        </div>
    </div>

    <!-- Модальное окно для добавления актива -->
    <div id="add-asset-modal" class="fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center hidden z-50">
        <div class="bg-[var(--bg-card)] text-[var(--text-primary)] rounded-lg p-4 max-w-2xl w-full relative">
            <button class="absolute top-2 right-2 text-white text-xl" onclick="closeAddAssetModal()">&times;</button>
            <h2 class="text-xl font-bold mb-4" data-translate="add_asset">Add Asset</h2>
            
            <div class="mb-4">
                <input type="text" id="asset-search" placeholder="Search token..." class="w-full p-2 rounded bg-gray-700 text-white" data-translate="search_token">
            </div>
            
            <div id="assets-list" class="max-h-96 overflow-y-auto asset-selector">
                <!-- Список токенов будет здесь -->
            </div>
            
            <div id="asset-form" class="mt-4 hidden">
                <h3 class="text-lg mb-2" id="selected-asset"></h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm mb-1" data-translate="amount">Amount</label>
                        <input type="number" id="asset-amount" class="w-full p-2 rounded bg-gray-700 text-white" placeholder="0.00">
                    </div>
                    <div>
                        <label class="block text-sm mb-1" data-translate="entry_price">Entry Price ($)</label>
                        <input type="number" id="asset-price" class="w-full p-2 rounded bg-gray-700 text-white" placeholder="0.00">
                    </div>
                </div>
                <button id="confirm-add-asset" class="mt-4 bg-indigo-600 hover:bg-indigo-700 px-4 py-2 rounded-lg w-full" data-translate="add">Add</button>
            </div>
        </div>
    </div>

    <!-- Контейнер для уведомлений -->
    <div id="notifications-container" class="notification"></div>

    <!-- Адаптивный футер -->
    <footer class="footer-container">
        <div class="footer-grid">
            <!-- English Column -->
            <div class="footer-column">
                <h3>Crypto Insights Pro</h3>
                <p>Real-time cryptocurrency analytics dashboard. Track Bitcoin, Ethereum, Solana, BNB, Avalanche with liquidation monitoring, volume analysis, funding rates, open interest, and professional trading indicators. Live data from Binance, Bybit, and OKX.</p>
            </div>
            
            <!-- Українська Column -->
            <div class="footer-column">
                <h3>Аналітика Криптовалют</h3>
                <p>Платформа моніторингу ринку криптовалют у реальному часі. Аналіз Bitcoin, Ethereum, Solana: ліквідації, обсяги, ставки фінансування, технічні індикатори. Дані з Binance, Bybit та OKX.</p>
            </div>
            
            <!-- Русский Column -->
            <div class="footer-column">
                <h3>Аналитика Криптовалют</h3>
                <p>Профессиональная аналитическая панель для трейдинга. Отслеживание Bitcoin, Ethereum, Solana: ликвидации, объемы, финансирование, открытый интерес. Данные с Binance, Bybit и OKX в реальном времени.</p>
            </div>
        </div>
        
        <div class="footer-bottom">
            <div class="footer-links">
            <p>© 2025 Crypto Insights.</p>
        </div>
            <footer style="text-align:center; margin-top: 2rem;">
  <img 
    src="https://hits.sh/crypto-analyst-ua.github.io/crypto-insights.svg?style=flat-square&label=Перегляди&color=blue&logo=github" 
    alt="Перегляди"
  />
            </footer>
    </footer>

    <script>
        // Инициализация переменных
        var currentLanguage = 'en';
        var favorites = JSON.parse(localStorage.getItem("favorites")) || [];
        if (!Array.isArray(favorites)) favorites = [];
        var cardView = false; // Табличный вид по умолчанию
        var heatmapType = 'volume';
        var allTokensData = [];
        var currentPage = 'market';
        var portfolio = JSON.parse(localStorage.getItem("portfolio")) || [];
        var priceAlerts = JSON.parse(localStorage.getItem("priceAlerts")) || [];
        
        var storedTheme = localStorage.getItem('darkMode');
        var isDarkMode = storedTheme === null ? true : storedTheme === 'true';
        
        var currentSymbol = '';
        var currentTimeframe = '15m';
        var chartWebSocket = null;
        var chartData = [];
    
    var translations = {
        ru: {
            token: "Токен",
            view_table: "Табличный вид",
            view_cards: "Карточный вид",
            price: "Цена",
            change: "Изменение",
            volume: "Объём",
            favorites: "Избранное",
            loading: "Загрузка...",
            all: "Все",
            winners: "Топ роста",
            losers: "Топ падения",
            favoritesFilter: "Избранное",
            support: "Поддержка",
            resistance: "Сопротивление",
            range24h: "Диапазон за 24ч",
            open_tradingview: "Открыть в TradingView",
            priceChange: "Изменение цены",
            fear_greed: "Страх и Жадность",
            extreme_fear: "Экстремальный страх",
            fear: "Страх",
            neutral: "Нейтрально",
            greed: "Жадность",
            extreme_greed: "Экстремальная жадность",
            volume_24h: "Объём за 24ч",
            market_overview: "Обзор рынка",
            portfolio_title: "Мой портфель",
            tools_title: "Профессиональные инструменты",
            portfolio_value: "Общая стоимость",
            portfolio_distribution: "Распределение",
            portfolio_history: "История доходности",
            my_assets: "Мои активы",
            add_asset: "Добавить актив",
            active_alerts: "Активные оповещения",
            add_alert: "Добавить оповещение",
            target_price: "Целевая цена",
            condition: "Условие",
            above: "Выше",
            below: "Ниже",
            add_alert_btn: "Добавить оповещение",
            position_calculator: "Калькулятор позиции",
            risk_calculator: "Калькулятор риска",
            entry_price: "Цена входа ($)",
            exit_price: "Цена выхода ($)",
            position_size: "Размер позиции",
            leverage: "Кредитное плечо",
            calculate: "Рассчитать",
            pnl: "PNL:",
            roi: "ROI:",
            fees: "Комиссии:",
            capital_size: "Размер капитала ($)",
            risk_per_trade: "Риск на сделку (%)",
            stop_loss: "Стоп-лосс ($)",
            risk_amount: "Сумма риска:",
            stop_distance: "Расстояние до стопа:",
            volume_analysis: "Анализ объёма",
            search_token: "Поиск токена...",
            add: "Добавить",
            liquidations_title: "Ликвидации на рынке",
            funding_rate_title: "Ставка фондирования",
            network_error: "Ошибка сети",
            news_error: "Не удалось загрузить новости",
            order_depth_title: "Глубина рынка",
            domination_title: "Доминация",
            dex_explorer_title: "DEX Обозреватель",
            support_project: "Поддержать проект",
            token_list: "Список токенов",
            "24h_volume": "Объём за 24ч",
            open_interest: "Открытый интерес",
            alpha_tracker_pro: "Альфа-Трекер PRO",
            click_for_details: "Нажмите для подробностей",
            nft_explorer_title: "NFT Обозреватель",
            airdrop_radar_title: "Радар эйрдропов",
            defi_title: "DeFi",
            remove: "Удалить",
            alert_triggered: "Сработал",
            alert_active: "Активен",
            no_assets: "Нет активов",
            add_first_asset: "Добавьте первый актив"
        },
        ua: {
            token: "Токен",
            view_table: "Табличний вигляд",
            view_cards: "Вигляд карток",
            price: "Ціна",
            change: "Зміна",
            volume: "Об'єм",
            favorites: "Обране",
            loading: "Завантаження...",
            all: "Всі",
            winners: "Топ зростання",
            losers: "Топ падіння",
            favoritesFilter: "Обране",
            support: "Підтримка",
            resistance: "Опір",
            range24h: "Діапазон 24г",
            open_tradingview: "Відкрити в TradingView",
            priceChange: "Зміна ціни",
            fear_greed: "Страх & Жадібність",
            extreme_fear: "Екстремальний страх",
            fear: "Страх",
            neutral: "Нейтрально",
            greed: "Жадібність",
            extreme_greed: "Екстремальна жадібність",
            volume_24h: "Об'єм 24г",
            market_overview: "Огляд ринку",
            portfolio_title: "Мій Портфель",
            tools_title: "Професійні інструменти",
            portfolio_value: "Загальна вартість",
            portfolio_distribution: "Розподіл",
            portfolio_history: "Історія прибутковості",
            my_assets: "Мої активи",
            add_asset: "Додати актив",
            active_alerts: "Активні алерти",
            add_alert: "Додати алерт",
            target_price: "Цільова ціна",
            condition: "Умова",
            above: "Вище ніж",
            below: "Нижче ніж",
            add_alert_btn: "Додати алерт",
            position_calculator: "Калькулятор позиції",
            risk_calculator: "Калькулятор ризику",
            entry_price: "Ціна входу ($)",
            exit_price: "Ціна виходу ($)",
            position_size: "Об'єм позиції",
            leverage: "Кредитне плече",
            calculate: "Розрахувати",
            pnl: "PNL:",
            roi: "ROI:",
            fees: "Комісії:",
            capital_size: "Розмір капіталу ($)",
            risk_per_trade: "Ризик на угоду (%)",
            stop_loss: "Стоп-лосс ($)",
            risk_amount: "Сума ризику:",
            stop_distance: "Відстань до стопу:",
            volume_analysis: "Аналіз об'єму",
            search_token: "Пошук токена...",
            add: "Додати",
            liquidations_title: "Ринкові ліквідації",
            funding_rate_title: "Фандинг",
            network_error: "Помилка мережі",
            news_error: "Не вдалося завантажити новини",
            order_depth_title: "Глибина ринку",
            domination_title: "Домінація",
            dex_explorer_title: "DEX Explorer",
            support_project: "Підтримати проект",
            token_list: "Список токенів",
            "24h_volume": "24г Об'єм",
            open_interest: "Відкритий інтерес",
            alpha_tracker_pro: "Альфа-Трекер PRO",
            click_for_details: "Натисніть для детальної інформації",
            nft_explorer_title: "NFT Explorer",
            airdrop_radar_title: "Радар Airdrop",
            defi_title: "DeFi",
            remove: "Видалити",
            alert_triggered: "Спрацював",
            alert_active: "Активний",
            no_assets: "Немає активів",
            add_first_asset: "Додати перший актив"
        },
        en: {
            token: "Token",
            view_table: "Table View",
            view_cards: "Card View",
            price: "Price",
            change: "Change",
            volume: "Volume",
            favorites: "Favorites",
            loading: "Loading...",
            all: "All",
            winners: "Top Gainers",
            losers: "Top Losers",
            favoritesFilter: "Favorites",
            support: "Support",
            resistance: "Resistance",
            range24h: "24h Range",
            open_tradingview: "Open in TradingView",
            priceChange: "Price Change",
            fear_greed: "Fear & Greed",
            extreme_fear: "Extreme Fear",
            fear: "Fear",
            neutral: "Neutral",
            greed: "Greed",
            extreme_greed: "Extreme Greed",
            volume_24h: "24h Volume",
            market_overview: "Market Overview",
            portfolio_title: "My Portfolio",
            tools_title: "Professional Tools",
            portfolio_value: "Portfolio Value",
            portfolio_distribution: "Distribution",
            portfolio_history: "Performance History",
            my_assets: "My Assets",
            add_asset: "Add Asset",
            active_alerts: "Active Alerts",
            add_alert: "Add Alert",
            target_price: "Target Price",
            condition: "Condition",
            above: "Above",
            below: "Below",
            add_alert_btn: "Add Alert",
            position_calculator: "Position Calculator",
            risk_calculator: "Risk Calculator",
            entry_price: "Entry Price ($)",
            exit_price: "Exit Price ($)",
            position_size: "Position Size",
            leverage: "Leverage",
            calculate: "Calculate",
            pnl: "PNL:",
            roi: "ROI:",
            fees: "Fees:",
            capital_size: "Capital Size ($)",
            risk_per_trade: "Risk Per Trade (%)",
            stop_loss: "Stop Loss ($)",
            risk_amount: "Risk Amount:",
            stop_distance: "Stop Distance:",
            volume_analysis: "Volume Analysis",
            search_token: "Search token...",
            add: "Add",
            liquidations_title: "Market Liquidations",
            funding_rate_title: "Funding Rate",
            network_error: "Network error",
            news_error: "Failed to load news",
            order_depth_title: "Order Depth",
            domination_title: "DOMINATION",
            dex_explorer_title: "DEX Explorer",
            support_project: "Support the Project",
            token_list: "Token List",
            "24h_volume": "24h Volume",
            open_interest: "Open Interest",
            alpha_tracker_pro: "Alpha Tracker PRO",
            click_for_details: "Click for details",
            nft_explorer_title: "NFT Explorer",
            airdrop_radar_title: "Airdrop Radar",
            defi_title: "DeFi",
            remove: "Remove",
            alert_triggered: "Triggered",
            alert_active: "Active",
            no_assets: "No assets",
            add_first_asset: "Add First Asset"
        }
    };

        // Функция перевода страницы
        function translatePage(lang) {
            currentLanguage = lang;
            localStorage.setItem('language', lang);
            
            var elements = document.querySelectorAll('[data-translate]');
            for (var i = 0; i < elements.length; i++) {
                var el = elements[i];
                var key = el.getAttribute('data-translate');
                if (translations[lang] && translations[lang][key]) {
                    if (el.tagName === 'INPUT' && el.placeholder) {
                        el.placeholder = translations[lang][key];
                    } else if (el.tagName === 'OPTION') {
                        el.textContent = translations[lang][key];
                    } else {
                        el.textContent = translations[lang][key];
                    }
                }
            }
        }

        // Обновление текста кнопки переключения вида
        function updateViewToggleButton() {
            var btnText = document.getElementById("viewToggleText");
            if (btnText) {
                if (cardView) {
                    btnText.textContent = translations[currentLanguage].view_table;
                } else {
                    btnText.textContent = translations[currentLanguage].view_cards;
                }
            }
        }

        // ========================
        // ОСНОВНЫЕ ФУНКЦИИ РЫНКА
        // ========================
        
        // Форматирование цены с учетом точности
        function formatPrice(price) {
            if (isNaN(price)) return '0.00';
            if (price < 0.0001) return price.toFixed(8);
            if (price < 1) return price.toFixed(6);
            if (price < 1000) return price.toFixed(4);
            return price.toFixed(2);
        }

        // Форматирование больших чисел
        function formatLargeNumber(num) {
            if (isNaN(num)) return '0.00';
            if (num >= 1000000000) return (num / 1000000000).toFixed(2) + 'B';
            if (num >= 1000000) return (num / 1000000).toFixed(2) + 'M';
            if (num >= 1000) return (num / 1000).toFixed(2) + 'K';
            return num.toFixed(2);
        }
        
        // Маппинг символов для иконок
        var specialTokenMapping = {
            'SHIBUSDT': 'SHIB',
            'BTTUSDT': 'BTT',
            'HOTUSDT': 'HOT',
            'PERLUSDT': 'PERL',
            'MBLUSDT': 'MBL',
            'STMXUSDT': 'STMX',
            'KEYUSDT': 'KEY',
            'TROYUSDT': 'TROY',
            'IQUSDT': 'IQ',
            'SLPUSDT': 'SLP',
            'SANDUSDT': 'SAND',
            'GALAUSDT': 'GALA',
            'GALUSDT': 'GAL',
            'PEOPLEUSDT': 'PEOPLE'
        };

        // Получение URL иконки токена
        function getTokenIconURL(symbol) {
            var baseSymbol = specialTokenMapping[symbol] || symbol.replace(/USDT$/, '');
            return 'https://cdn.jsdelivr.net/npm/cryptocurrency-icons@0.18.0/svg/color/' + baseSymbol.toLowerCase() + '.svg';
        }

        // Обработка ошибок загрузки иконок
        window.handleIconError = function(img, symbol) {
            if (!img) return;
            
            var tokenSymbol = symbol || (img.alt ? img.alt.replace(' icon', '') : '') || '';
            var text = tokenSymbol.length > 4 ? tokenSymbol.substring(0, 3) : tokenSymbol;
            var size = img.classList.contains('token-icon') ? '32' : '24';
            
            var svg = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" width="' + size + '" height="' + size + '">' +
                '<circle cx="16" cy="16" r="16" fill="#2d3748"/>' +
                '<text x="50%" y="50%" fill="#fff" font-size="' + (size === '24' ? '10' : '12') + '" text-anchor="middle" dy=".3em">' + text + '</text>' +
            '</svg>';
            
            img.src = 'data:image/svg+xml;base64,' + btoa(svg);
            img.onerror = null;
        };

        // Генерация истории цен для мини-графика с учетом поддержки и сопротивления
        function generatePriceHistory(currentPrice, openPrice, highPrice, lowPrice) {
            var prices = [currentPrice];
            var volatility = (highPrice - lowPrice) * 0.1;
            
            for (var i = 1; i < 24; i++) {
                var prevPrice = prices[i-1];
                // Генерируем цену, которая остается в пределах диапазона high-low
                var newPrice = prevPrice * (1 + (Math.random() - 0.5) * 0.05);
                prices.push(Math.max(lowPrice, Math.min(highPrice, newPrice)));
            }
            
            return prices;
        };

        // Создание мини-графика с поддержкой и сопротивлением
        function createMiniChart(canvas, token) {
            if (!canvas) return;
            
            var price = parseFloat(token.lastPrice) || 0;
            var open = parseFloat(token.openPrice) || 0;
            var high = parseFloat(token.highPrice) || 0;
            var low = parseFloat(token.lowPrice) || 0;
            
            var isUp = price >= open;
            var range = high - low;
            
            // Генерируем историю цен
            var prices = generatePriceHistory(price, open, high, low);
            
            var ctx = canvas.getContext('2d');
            var width = canvas.width;
            var height = canvas.height;
            
            // Рассчитываем позиции для линий поддержки/сопротивления
            var minPrice = Math.min.apply(null, prices);
            var maxPrice = Math.max.apply(null, prices);
            var priceRange = maxPrice - minPrice || 1;
            
            // Рисуем область диапазона
            var rangeTop = ((high - minPrice) / priceRange) * height;
            var rangeBottom = ((low - minPrice) / priceRange) * height;
            
            // Очищаем canvas
            ctx.clearRect(0, 0, width, height);
            
            // Рисуем область диапазона
            ctx.fillStyle = 'rgba(59, 130, 246, 0.1)';
            ctx.fillRect(0, rangeBottom, width, rangeTop - rangeBottom);
            
            // Рисуем линию поддержки
            ctx.beginPath();
            ctx.strokeStyle = '#22c55e';
            ctx.setLineDash([2, 2]);
            ctx.moveTo(0, rangeBottom);
            ctx.lineTo(width, rangeBottom);
            ctx.stroke();
            
            // Рисуем линию сопротивления
            ctx.beginPath();
            ctx.strokeStyle = '#ef4444';
            ctx.setLineDash([2, 2]);
            ctx.moveTo(0, rangeTop);
            ctx.lineTo(width, rangeTop);
            ctx.stroke();
            
            // Рисуем график цены
            ctx.beginPath();
            ctx.strokeStyle = isUp ? '#22c55e' : '#ef4444';
            ctx.lineWidth = 1.5;
            ctx.setLineDash([]);
            
            for (var i = 0; i < prices.length; i++) {
                var x = (i / (prices.length - 1)) * width;
                var y = height - ((prices[i] - minPrice) / priceRange) * height;
                
                if (i === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            }
            
            ctx.stroke();
        };

        // Получение данных о криптовалютах
        function fetchCryptoData(retries) {
            if (retries === undefined) retries = 3;
            return fetch("https://api.binance.com/api/v3/ticker/24hr")
                .then(function(res) {
                    if (!res.ok) throw new Error('API Error');
                    return res.json();
                })
                .then(function(data) {
                    return data.filter(function(token) { 
                        return token.symbol.endsWith("USDT"); 
                    });
                })
                .catch(function(error) {
                    if (retries > 0) return fetchCryptoData(retries - 1);
                    var loadingEl = document.getElementById("loading");
                    if (loadingEl) {
                        loadingEl.innerHTML = "⚠️ " + translations[currentLanguage].network_error;
                    }
                    throw error;
                });
        };

        // Применение фильтров
        function applyFilters(data) {
            var filter = document.getElementById("filter-select").value;
            var rawSearch = document.getElementById("searchInput").value;
            
            var search = rawSearch
                .toUpperCase()
                .replace(/[^A-Z0-9]/g, '')
                .replace(/([A-Z])([0-9])/g, '$1 $2')
                .split(/\s+/);

            return data.filter(function(token) {
                var symbolParts = token.symbol
                    .toUpperCase()
                    .replace(/[^A-Z0-9]/g, '')
                    .split(/(?=[A-Z])/);

                var match = search.every(function(term) {
                    return symbolParts.some(function(part) {
                        return part.indexOf(term) === 0;
                    }) || symbolParts.join('').indexOf(term) !== -1;
                });

                if (!match) return false;
                if (filter === "winners") return parseFloat(token.priceChangePercent) > 0;
                if (filter === "losers") return parseFloat(token.priceChangePercent) < 0;
                if (filter === "favorites") return favorites.indexOf(token.symbol) !== -1;
                return true;
            });
        };

        // Сортировка данных
        function sortData(data) {
            return data.sort(function(a, b) {
                return parseFloat(b.quoteVolume) - parseFloat(a.quoteVolume);
            }).slice(0, 100);
        }

        // Отрисовка карточек
        function renderCards(tokens) {
            var container = document.getElementById("cards-container");
            if (!container) return;
            
            container.innerHTML = "";
            var tableContainer = document.getElementById("table-container");
            if (tableContainer) tableContainer.classList.add("hidden");
            container.classList.remove("hidden");

            tokens.forEach(function(token) {
                var price = parseFloat(token.lastPrice) || 0;
                var changePercent = parseFloat(token.priceChangePercent) || 0;
                var volume = parseFloat(token.quoteVolume) || 0;
                var div = document.createElement("div");
                div.className = "card p-4 cursor-pointer tooltip";
                div.dataset.symbol = token.symbol;
                div.dataset.tooltip = translations[currentLanguage].click_for_details;
                div.onclick = function() { openModal(token); };

                // Генерация объема для тепловой карты (симуляция)
                var volumeBarWidth = Math.min(100, Math.log(volume + 1) / Math.log(10000000) * 100);
                
                div.innerHTML = `
                    <div class="flex justify-between items-center mb-2">
                        <div class="text-lg font-bold flex items-center">
                            <img src="${getTokenIconURL(token.symbol)}" 
                                alt="${token.symbol} icon" 
                                class="token-icon" 
                                onerror="handleIconError(this)"/>
                            ${token.symbol.replace('USDT', '')}
                        </div>
                        <div>
                            <button onclick="event.stopPropagation(); toggleFavorite('${token.symbol}')" class="${
                                favorites.indexOf(token.symbol) !== -1 ? "text-yellow-400" : "text-gray-400"
                            } hover:text-yellow-300 text-xl">★</button>
                        </div>
                    </div>
                    <div class="flex justify-between items-center mb-1">
                        <div class="text-xl font-semibold">$${formatPrice(price)}</div>
                        <span class="px-2 py-1 rounded text-white text-sm font-semibold ${
                            changePercent >= 0 ? "bg-green-500" : "bg-red-500"
                        }">
                            ${changePercent.toFixed(2)}%
                        </span>
                    </div>
                    
                    <!-- Контейнер для мини-графика -->
                    <div class="mini-chart-container">
                        <canvas class="mini-chart w-full h-full"></canvas>
                    </div>
                    
                    <!-- Информация о верхней/нижней цене -->
                    <div class="mini-chart-price-info">
                        <span class="mini-chart-high">H: $${formatPrice(parseFloat(token.highPrice))}</span>
                        <span class="mini-chart-low">L: $${formatPrice(parseFloat(token.lowPrice))}</span>
                    </div>
                    
                    <div class="mt-3 grid grid-cols-2 gap-2 text-sm">
                        <div>
                            <div class="text-gray-400">${translations[currentLanguage].volume}:</div>
                            <div>${formatLargeNumber(volume)}</div>
                        </div>
                        <div>
                            <div class="text-gray-400">${translations[currentLanguage].range24h}:</div>
                            <div>${formatPrice(parseFloat(token.highPrice) - parseFloat(token.lowPrice))}</div>
                        </div>
                    </div>
                    <div class="relative h-1 mt-2 bg-gray-700 rounded-full">
                        <div class="volume-bar" style="width: ${volumeBarWidth}%"></div>
                    </div>
                `;
                container.appendChild(div);
                
                // Создаем мини-график
                var canvas = div.querySelector('.mini-chart');
                if (canvas) {
                    canvas.width = canvas.offsetWidth;
                    canvas.height = canvas.offsetHeight;
                    createMiniChart(canvas, token);
                }
            });
        };

        // Отрисовка таблицы
        function renderTable(tokens) {
            var cardsContainer = document.getElementById("cards-container");
            if (cardsContainer) cardsContainer.classList.add("hidden");
            
            var tableContainer = document.getElementById("table-container");
            if (tableContainer) tableContainer.classList.remove("hidden");
            
            var tbody = document.getElementById("table-body");
            if (!tbody) return;
            
            tbody.innerHTML = "";

            tokens.forEach(function(token) {
                var price = parseFloat(token.lastPrice) || 0;
                var changePercent = parseFloat(token.priceChangePercent) || 0;
                var volume = parseFloat(token.quoteVolume) || 0;
                var tr = document.createElement("tr");
                tr.className = "border-t border-gray-700 cursor-pointer hover:bg-gray-700 tooltip";
                tr.dataset.symbol = token.symbol;
                tr.dataset.tooltip = translations[currentLanguage].click_for_details;
                tr.onclick = function() { openModal(token); };

                tr.innerHTML = `
                    <td class="px-4 py-2 flex items-center gap-2">
                        <img src="${getTokenIconURL(token.symbol)}" 
                            alt="${token.symbol} icon" 
                            class="token-icon mr-3" 
                            onerror="handleIconError(this)"/>
                        ${token.symbol.replace('USDT', '')}
                    </td>
                    <td class="px-4 py-2 text-right">$${formatPrice(price)}</td>
                    <td class="px-4 py-2 text-right">
                        <span class="px-2 py-1 rounded text-white text-sm font-semibold ${
                            changePercent >= 0 ? "bg-green-500" : "bg-red-500"
                        }">
                            ${changePercent.toFixed(2)}%
                        </span>
                    </td>
                    <td class="px-4 py-2 text-right">${formatLargeNumber(volume)}</td>
                    <td class="px-4 py-2 text-right support-cell">$${formatPrice(parseFloat(token.lowPrice))}</td>
                    <td class="px-4 py-2 text-right resistance-cell">$${formatPrice(parseFloat(token.highPrice))}</td>
                    <td class="px-4 py-2 text-center">
                        <button onclick="event.stopPropagation(); toggleFavorite('${token.symbol}')" class="${
                            favorites.indexOf(token.symbol) !== -1 ? "text-yellow-400" : "text-gray-400"
                        } hover:text-yellow-300 text-xl">★</button>
                    </td>
                `;
                tbody.appendChild(tr);
            });
        };

        // Переключение избранного
        function toggleFavorite(symbol) {
            if (favorites.indexOf(symbol) !== -1) {
                favorites = favorites.filter(function(s) { return s !== symbol; });
            } else {
                favorites.push(symbol);
            }
            localStorage.setItem("favorites", JSON.stringify(favorites));
            updateUI();
        };

        // Открытие модального окна
        function openModal(token) {
            if (!token) return;
            
            var modal = document.getElementById("modal");
            if (modal) modal.classList.remove("hidden");
            
            currentSymbol = token.symbol;
            var iconURL = getTokenIconURL(token.symbol);
            
            var modalTitle = document.getElementById("modalTitle");
            if (modalTitle) {
                modalTitle.innerHTML = `
                    <img src="${iconURL}" 
                        alt="${token.symbol} icon" 
                        class="token-icon" 
                        onerror="handleIconError(this)"/>
                    ${token.symbol.replace('USDT', '')}/USDT
                `;
            }

            try {
                initTradingViewChart("modalChartTV", token.symbol, currentTimeframe);
            } catch (error) {
                console.error('Error initializing chart:', error);
                var chartContainer = document.querySelector('.modal-chart-container');
                if (chartContainer) {
                    chartContainer.innerHTML = '<div class="error-message">' + translations[currentLanguage].network_error + ': ' + error.message + '</div>';
                }
            }

            var price = parseFloat(token.lastPrice) || 0;
            var low = parseFloat(token.lowPrice) || 0;
            var high = parseFloat(token.highPrice) || 0;
            var supportZone = (low * 0.99).toFixed(8);
            var resistanceZone = (high * 1.01).toFixed(8);

            var modalSupportLabel = document.getElementById("modalSupportLabel");
            if (modalSupportLabel) {
                modalSupportLabel.innerHTML = `
                    ${translations[currentLanguage].support} Zone: $${supportZone} - $${low.toFixed(8)}
                `;
            }
            
            var modalResistanceLabel = document.getElementById("modalResistanceLabel");
            if (modalResistanceLabel) {
                modalResistanceLabel.innerHTML = `
                    ${translations[currentLanguage].resistance} Zone: $${high.toFixed(8)} - $${resistanceZone}
                `;
            }

            var detailsBody = document.getElementById("modalDetailsBody");
            if (detailsBody) {
                detailsBody.innerHTML = `
                    <tr class="border-b border-gray-600">
                        <td class="p-2">${translations[currentLanguage].price}:</td>
                        <td class="p-2 text-right">$${formatPrice(price)}</td>
                    </tr>
                    <tr class="border-b border-gray-600">
                        <td class="p-2">24h ${translations[currentLanguage].change}:</td>
                        <td class="p-2 text-right">${parseFloat(token.priceChange).toFixed(8)} (${parseFloat(token.priceChangePercent).toFixed(2)}%)</td>
                    </tr>
                    <tr class="border-b border-gray-600">
                        <td class="p-2">${translations[currentLanguage].volume_24h}:</td>
                        <td class="p-2 text-right">${formatLargeNumber(parseFloat(token.quoteVolume))}</td>
                    </tr>
                    <tr class="border-b border-gray-600">
                        <td class="p-2">${translations[currentLanguage].support}:</td>
                        <td class="p-2 text-right">$${formatPrice(low)}</td>
                    </tr>
                    <tr class="border-b border-gray-600">
                        <td class="p-2">${translations[currentLanguage].resistance}:</td>
                        <td class="p-2 text-right">$${formatPrice(high)}</td>
                    </tr>
                `;
            }
        };

        // Расчет RSI
        function calculateRSI(data, period) {
            if (period === undefined) period = 14;
            if (data.length <= period) {
                console.warn('Недостаточно данных для расчета RSI');
                return [];
            }
            
            var rsiValues = [];
            var avgGain = 0;
            var avgLoss = 0;
            
            // Рассчитываем начальные средние значения
            for (var i = 1; i <= period; i++) {
                var change = data[i].close - data[i-1].close;
                if (change > 0) {
                    avgGain += change;
                } else {
                    avgLoss -= change;
                }
            }
            
            avgGain /= period;
            avgLoss /= period;
            
            // Первое значение RSI
            var rs = avgLoss === 0 ? 100 : avgGain / avgLoss;
            rsiValues.push(100 - (100 / (1 + rs)));
            
            // Рассчитываем последующие значения
            for (var i = period + 1; i < data.length; i++) {
                var change = data[i].close - data[i-1].close;
                var gain = 0;
                var loss = 0;
                
                if (change > 0) {
                    gain = change;
                } else {
                    loss = -change;
                }
                
                avgGain = ((avgGain * (period - 1)) + gain) / period;
                avgLoss = ((avgLoss * (period - 1)) + loss) / period;
                
                rs = avgLoss === 0 ? 100 : avgGain / avgLoss;
                rsiValues.push(100 - (100 / (1 + rs)));
            }
            
            return rsiValues;
        }

        // Обновление отображения RSI
        function updateRsiDisplay(rsiValues) {
            var rsiValueEl = document.getElementById("rsiValue");
            if (!rsiValueEl) return;
            
            if (rsiValues.length === 0) {
                rsiValueEl.textContent = '--';
                return;
            }
            
            var lastRSI = rsiValues[rsiValues.length - 1];
            
            rsiValueEl.textContent = lastRSI.toFixed(2);
            rsiValueEl.className = 'rsi-value ' + (
                lastRSI > 70 ? 'rsi-overbought' : 
                lastRSI < 30 ? 'rsi-oversold' : 'rsi-neutral'
            );
        }

        // Обновление тепловой карты
        function updateHeatmap() {
            var container = document.getElementById("heatmap-container");
            if (!container) return;
            container.innerHTML = "";

            var topTokens = allTokensData.slice()
                .sort(function(a, b) {
                    return heatmapType === 'volume' ? 
                        parseFloat(b.quoteVolume) - parseFloat(a.quoteVolume) : 
                        Math.abs(parseFloat(b.priceChangePercent)) - Math.abs(parseFloat(a.priceChangePercent));
                })
                .slice(0, 48);

            var maxValue = heatmapType === 'volume' ?
                Math.max.apply(null, topTokens.map(function(t) { return parseFloat(t.quoteVolume); })) :
                Math.max.apply(null, topTokens.map(function(t) { return Math.abs(parseFloat(t.priceChangePercent)); }));

            topTokens.forEach(function(token) {
                var cell = document.createElement("div");
                cell.className = "heatmap-cell";
                
                var symbol = token.symbol.replace("USDT", "");
                var price = parseFloat(token.lastPrice);
                var change = parseFloat(token.priceChangePercent);
                var volume = parseFloat(token.quoteVolume);
                
                // Определение цвета на основе изменения цены
                var bgColor, changeColor;
                if (change >= 0) {
                    bgColor = "var(--heatmap-bg-up)";
                    changeColor = isDarkMode ? "#22c55e" : "#166534";
                } else {
                    bgColor = "var(--heatmap-bg-down)";
                    changeColor = isDarkMode ? "#ef4444" : "#991b1b";
                }
                
                cell.style.background = bgColor;
                
                // Интенсивность объема для высоты полосы
                var volumeIntensity = Math.min(1, volume / maxValue);
                
                // Индикатор тренда (треугольник)
                var trendIndicator = document.createElement("div");
                trendIndicator.className = "trend-indicator";
                if (change >= 0) {
                    trendIndicator.style.borderWidth = "0 5px 8px 5px";
                    trendIndicator.style.borderColor = "transparent transparent " + changeColor + " transparent";
                } else {
                    trendIndicator.style.borderWidth = "8px 5px 0 5px";
                    trendIndicator.style.borderColor = changeColor + " transparent transparent transparent";
                }
                cell.appendChild(trendIndicator);
                
                // Название токена
                var tokenSymbol = document.createElement("div");
                tokenSymbol.className = "heatmap-token";
                tokenSymbol.textContent = symbol;
                cell.appendChild(tokenSymbol);
                
                // Цена
                var priceElement = document.createElement("div");
                priceElement.className = "heatmap-price";
                priceElement.textContent = '$' + formatPrice(price);
                cell.appendChild(priceElement);
                
                // Изменение цены
                var changeElement = document.createElement("div");
                changeElement.className = "heatmap-change";
                changeElement.textContent = (change >= 0 ? '+' : '') + change.toFixed(2) + '%';
                changeElement.style.backgroundColor = change >= 0 ? 
                    isDarkMode ? 'rgba(34, 197, 94, 0.2)' : 'rgba(22, 101, 52, 0.2)' : 
                    isDarkMode ? 'rgba(239, 68, 68, 0.2)' : 'rgba(153, 27, 27, 0.2)';
                changeElement.style.color = changeColor;
                cell.appendChild(changeElement);
                
                // Полоса объема
                var volumeBar = document.createElement("div");
                volumeBar.className = "heatmap-volume-bar";
                volumeBar.style.width = "100%";
                volumeBar.style.background = change >= 0 ? 
                    isDarkMode ? 'linear-gradient(90deg, #3b82f6, #1e40af)' : 'linear-gradient(90deg, #166534, #14532d)' : 
                    isDarkMode ? 'linear-gradient(90deg, #ef4444, #991b1b)' : 'linear-gradient(90deg, #7f1d1d, #450a0a)';
                volumeBar.style.opacity = 0.1 + volumeIntensity * 0.7;
                cell.appendChild(volumeBar);
                
                // Обработчик клика
                cell.onclick = function() {
                    var prevFilter = document.getElementById("filter-select").value;
                    document.getElementById("filter-select").value = "all";
                    document.getElementById("searchInput").value = symbol;
                    updateUI().then(function() {
                        var tokenElement = document.querySelector('[data-symbol="' + token.symbol + '"]');
                        if (tokenElement) {
                            tokenElement.scrollIntoView({behavior: "smooth"});
                        }
                        document.getElementById("filter-select").value = prevFilter;
                    });
                };
                
                container.appendChild(cell);
            });
        };

        // Обновление UI
        function updateUI() {
            var loadingEl = document.getElementById("loading");
            if (loadingEl) loadingEl.classList.remove("hidden");
            
            fetchCryptoData()
                .then(function(data) {
                    allTokensData = data;
                    data = applyFilters(data);
                    data = sortData(data);
                    if (cardView) renderCards(data);
                    else renderTable(data);
                    updateHeatmap();
                })
                .catch(function(error) {
                    console.error('Error updating UI:', error);
                })
                .finally(function() {
                    if (loadingEl) loadingEl.classList.add("hidden");
                });
        };

        // Инициализация графика TradingView
        function initTradingViewChart(containerId, symbol, timeframe) {
            if (timeframe === undefined) timeframe = '15m';
            
            // Закрываем предыдущий вебсокет
            if (chartWebSocket) {
                chartWebSocket.close();
                chartWebSocket = null;
            }
            
            currentTimeframe = timeframe;
            var container = document.getElementById(containerId);
            if (!container) return;
            if (container.childNodes.length > 0) container.innerHTML = '';
            
            // Создаем контейнер для ошибок
            var errorContainer = document.createElement('div');
            errorContainer.id = containerId + '-error';
            container.appendChild(errorContainer);
            
            // Проверяем доступность библиотеки
            if (typeof LightweightCharts === 'undefined') {
                errorContainer.innerHTML = '<div class="error-message">' + translations[currentLanguage].network_error + '</div>';
                return;
            }
            
            try {
                var chart = LightweightCharts.createChart(container, {
                    layout: {
                        background: { color: 'transparent' },
                        textColor: isDarkMode ? '#e2e8f0' : '#1e293b',
                    },
                    grid: {
                        vertLines: { color: isDarkMode ? '#334155' : '#cbd5e1' },
                        horzLines: { color: isDarkMode ? '#334155' : '#cbd5e1' },
                    },
                    timeScale: {
                        borderColor: isDarkMode ? '#475569' : '#94a3b8',
                        timeVisible: true,
                        secondsVisible: false,
                    },
                    crosshair: {
                        mode: LightweightCharts.CrosshairMode.Normal,
                        vertLine: {
                            color: isDarkMode ? '#94a3b8' : '#64748b',
                            width: 1,
                            style: 2,
                        },
                        horzLine: {
                            color: isDarkMode ? '#94a3b8' : '#64748b',
                            width: 1,
                            style: 2,
                        },
                    },
                    localization: {
                        priceFormatter: function(price) { return formatPrice(price); }
                    },
                    rightPriceScale: {
                        borderVisible: false,
                    },
                    leftPriceScale: {
                        visible: false,
                    }
                });

                var series = chart.addCandlestickSeries({
                    upColor: isDarkMode ? '#22c55e' : '#16a34a',
                    downColor: isDarkMode ? '#ef4444' : '#dc2626',
                    borderUpColor: isDarkMode ? '#22c55e' : '#16a34a',
                    borderDownColor: isDarkMode ? '#ef4444' : '#dc2626',
                    wickUpColor: isDarkMode ? '#22c55e' : '#16a34a',
                    wickDownColor: isDarkMode ? '#ef4444' : '#dc2626',
                    priceFormat: {
                        type: 'price',
                        precision: 8,
                        minMove: 0.00000001
                    }
                });

                fetch('https://api.binance.com/api/v3/klines?symbol=' + symbol + '&interval=' + timeframe + '&limit=200')
                    .then(function(res) {
                        if (!res.ok) throw new Error(translations[currentLanguage].network_error + ': ' + res.status);
                        return res.json();
                    })
                    .then(function(data) {
                        if (!Array.isArray(data) || data.length === 0) {
                            throw new Error(translations[currentLanguage].network_error);
                        }
                        
                        chartData = data.map(function(d) {
                            return {
                                time: d[0] / 1000, // Преобразуем в секунды
                                open: parseFloat(d[1]),
                                high: parseFloat(d[2]),
                                low: parseFloat(d[3]),
                                close: parseFloat(d[4]),
                            };
                        });
                        
                        series.setData(chartData);
                        
                        // Рассчитываем RSI
                        var rsiValues = calculateRSI(chartData);
                        updateRsiDisplay(rsiValues);
                        
                        // Вебсокет для обновления данных в реальном времени
                        chartWebSocket = new WebSocket('wss://stream.binance.com:9443/ws/' + symbol.toLowerCase() + '@kline_' + timeframe);
                        
                        chartWebSocket.onmessage = function(event) {
                            try {
                                var message = JSON.parse(event.data);
                                if (message.k) {
                                    var k = message.k;
                                    var newCandle = {
                                        time: k.t / 1000, // Время в секундах
                                        open: parseFloat(k.o),
                                        high: parseFloat(k.h),
                                        low: parseFloat(k.l),
                                        close: parseFloat(k.c),
                                    };
                                    
                                    // Обновляем данные графика
                                    series.update(newCandle);
                                    
                                    // Добавляем новую свечу в данные
                                    chartData.push(newCandle);
                                    
                                    // Обновляем RSI
                                    var rsiValues = calculateRSI(chartData);
                                    updateRsiDisplay(rsiValues);
                                }
                            } catch (e) {
                                console.error('WebSocket data processing error:', e);
                            }
                        };
                        
                        chartWebSocket.onerror = function(error) {
                            console.error('WebSocket Error:', error);
                        };
                    })
                    .catch(function(error) {
                        console.error('TradingView Error:', error);
                        if (errorContainer) {
                            errorContainer.innerHTML = '<div class="error-message">' + translations[currentLanguage].network_error + ': ' + error.message + '</div>';
                        }
                    });
            } catch (error) {
                console.error('Chart initialization error:', error);
                if (container) {
                    container.innerHTML = '<div class="error-message">' + translations[currentLanguage].network_error + ': ' + error.message + '</div>';
                }
            }
        }

        // ========================
        // ПОРТФЕЛЬ И АЛЕРТЫ
        // ========================
        
        // Рендеринг портфеля
        function renderPortfolio() {
            var container = document.getElementById('portfolio-list');
            if (!container) return;
            
            if (portfolio.length === 0) {
                container.innerHTML = `
                    <div class="text-center py-8 text-gray-500">
                        <i class="fas fa-wallet text-4xl mb-3"></i>
                        <p>${translations[currentLanguage].no_assets}</p>
                        <button id="add-first-asset" class="mt-4 bg-indigo-600 hover:bg-indigo-700 px-4 py-2 rounded-lg">
                            <i class="fas fa-plus mr-2"></i>
                            ${translations[currentLanguage].add_first_asset}
                        </button>
                    </div>
                `;
                // Добавлен обработчик для кнопки
                var addFirstAssetBtn = document.getElementById('add-first-asset');
                if (addFirstAssetBtn) {
                    addFirstAssetBtn.addEventListener('click', openAddAssetModal);
                }
                return;
            }
            
            var totalValue = 0;
            var portfolioHTML = '';
            
            portfolio.forEach(function(asset, index) {
                var token = allTokensData.find(function(t) { return t.symbol === asset.symbol; });
                var currentPrice = token ? parseFloat(token.lastPrice) : 0;
                var value = currentPrice * asset.amount;
                var profit = value - (asset.entryPrice * asset.amount);
                var profitPercent = asset.entryPrice > 0 ? (profit / (asset.entryPrice * asset.amount)) * 100 : 0;
                
                totalValue += value;
                
                portfolioHTML += `
                    <div class="portfolio-item">
                        <div class="flex justify-between items-center">
                            <div class="flex items-center">
                                <img src="${getTokenIconURL(asset.symbol)}" 
                                    alt="${asset.symbol}" 
                                    class="token-icon mr-3" 
                                    onerror="handleIconError(this)"/>
                                <div>
                                    <div class="font-bold">${asset.symbol.replace('USDT', '')}</div>
                                    <div class="text-sm text-gray-400">${asset.amount} @ $${formatPrice(asset.entryPrice)}</div>
                                </div>
                            </div>
                            <div class="text-right">
                                <div class="font-bold">${value > 0 ? '$' + formatPrice(value) : 'N/A'}</div>
                                <div class="${profit >= 0 ? 'text-green-500' : 'text-red-500'}">
                                    ${value > 0 ? '$' + formatPrice(profit) + ' (' + profitPercent.toFixed(2) + '%)' : 'N/A'}
                                </div>
                            </div>
                        </div>
                        <div class="flex justify-end mt-2">
                            <button onclick="removeAsset(${index})" class="text-red-500 hover:text-red-400 text-sm">
                                <i class="fas fa-trash mr-1"></i>
                                ${translations[currentLanguage].remove}
                            </button>
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = portfolioHTML;
            
            // Обновляем общую стоимость портфеля
            var portfolioValueEl = document.getElementById('portfolio-value');
            if (portfolioValueEl) portfolioValueEl.textContent = '$' + formatPrice(totalValue);
            
            // Обновляем график распределения
            updatePortfolioChart();
        }
        
        // Добавление актива
        function addAsset(symbol, amount, entryPrice) {
            portfolio.push({ symbol: symbol, amount: amount, entryPrice: entryPrice });
            localStorage.setItem('portfolio', JSON.stringify(portfolio));
            renderPortfolio();
            showNotification(translations[currentLanguage].add_asset + ': ' + symbol, 'success');
        }
        
        // Удаление актива
        function removeAsset(index) {
            var asset = portfolio[index];
            portfolio.splice(index, 1);
            localStorage.setItem('portfolio', JSON.stringify(portfolio));
            renderPortfolio();
            showNotification(translations[currentLanguage].remove + ': ' + asset.symbol, 'warning');
        }
        
        // Рендеринг алертов
        function renderAlerts() {
            var container = document.getElementById('alerts-list');
            if (!container) return;
            
            if (priceAlerts.length === 0) {
                container.innerHTML = `
                    <div class="text-center py-4 text-gray-500">
                        <i class="fas fa-bell-slash text-2xl mb-2"></i>
                        <p>${translations[currentLanguage].no_assets}</p>
                    </div>
                `;
                return;
            }
            
            var alertsHTML = '';
            
            priceAlerts.forEach(function(alert, index) {
                var token = allTokensData.find(function(t) { return t.symbol === alert.symbol; });
                var currentPrice = token ? parseFloat(token.lastPrice) : 0;
                
                alertsHTML += `
                    <div class="border-b border-gray-700 py-3">
                        <div class="flex justify-between items-center">
                            <div>
                                <div class="font-bold">${alert.symbol.replace('USDT', '')}</div>
                                <div class="text-sm">${translations[currentLanguage].price} ${alert.condition === 'above' ? translations[currentLanguage].above : translations[currentLanguage].below} $${formatPrice(alert.targetPrice)}</div>
                            </div>
                            <div>
                                <span class="${alert.triggered ? 'text-gray-500' : 'text-green-500'} text-sm">
                                    ${alert.triggered ? translations[currentLanguage].alert_triggered : translations[currentLanguage].alert_active}
                                </span>
                                <button onclick="removeAlert(${index})" class="text-red-500 hover:text-red-400 ml-3">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                        <div class="mt-1 text-sm">
                            ${translations[currentLanguage].price}: $${formatPrice(currentPrice)}
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = alertsHTML;
        }
        
        // Добавление алерта
        function addAlert(symbol, targetPrice, condition) {
            priceAlerts.push({
                symbol: symbol,
                targetPrice: targetPrice,
                condition: condition,
                triggered: false,
                timestamp: Date.now()
            });
            localStorage.setItem('priceAlerts', JSON.stringify(priceAlerts));
            renderAlerts();
            showNotification(translations[currentLanguage].add_alert_btn + ': ' + symbol, 'success');
        }
        
        // Удаление алерта
        function removeAlert(index) {
            var alert = priceAlerts[index];
            priceAlerts.splice(index, 1);
            localStorage.setItem('priceAlerts', JSON.stringify(priceAlerts));
            renderAlerts();
            showNotification(translations[currentLanguage].remove + ': ' + alert.symbol, 'warning');
        }
        
        // Проверка срабатывания алертов
        function checkAlerts() {
            priceAlerts.forEach(function(alert, index) {
                if (alert.triggered) return;
                
                var token = allTokensData.find(function(t) { return t.symbol === alert.symbol; });
                if (!token) return;
                
                var currentPrice = parseFloat(token.lastPrice);
                var triggered = false;
                
                if (alert.condition === 'above' && currentPrice > alert.targetPrice) {
                    triggered = true;
                } else if (alert.condition === 'below' && currentPrice < alert.targetPrice) {
                    triggered = true;
                }
                
                if (triggered) {
                    priceAlerts[index].triggered = true;
                    localStorage.setItem('priceAlerts', JSON.stringify(priceAlerts));
                    showNotification(translations[currentLanguage].add_alert + ': ' + alert.symbol + ' $' + currentPrice.toFixed(4), 'alert');
                    
                    // Звуковое уведомление
                    try {
                        var audio = new Audio('https://assets.mixkit.co/sfx/preview/mixkit-alarm-digital-clock-beep-989.mp3');
                        audio.play();
                    } catch (e) {
                        console.error('Failed to play alert sound:', e);
                    }
                }
            });
            
            renderAlerts();
        }
        
        // ========================
        // ИНСТРУМЕНТЫ
        // ========================
        
        // Калькулятор позиции
        function calculatePosition() {
            var entryPrice = parseFloat(document.getElementById('entry-price').value);
            var exitPrice = parseFloat(document.getElementById('exit-price').value);
            var positionSize = parseFloat(document.getElementById('position-size').value);
            var leverage = parseFloat(document.getElementById('leverage').value) || 1;
            
            if (isNaN(entryPrice) || isNaN(exitPrice) || isNaN(positionSize)) {
                showNotification(translations[currentLanguage].loading, 'error');
                return;
            }
            
            var pnl = (exitPrice - entryPrice) * positionSize * leverage;
            var roi = (pnl / (entryPrice * positionSize)) * 100;
            var fees = (entryPrice * positionSize * 0.0004) + (exitPrice * positionSize * 0.0004);
            
            var pnlResult = document.getElementById('pnl-result');
            if (pnlResult) pnlResult.textContent = '$' + pnl.toFixed(2);
            
            var roiResult = document.getElementById('roi-result');
            if (roiResult) roiResult.textContent = roi.toFixed(2) + '%';
            
            var feesResult = document.getElementById('fees-result');
            if (feesResult) feesResult.textContent = '$' + fees.toFixed(2);
            
            var results = document.getElementById('calculation-results');
            if (results) results.classList.remove('hidden');
        }
        
        // Калькулятор риска
        function calculateRisk() {
            var capital = parseFloat(document.getElementById('risk-capital').value);
            var riskPerTrade = parseFloat(document.getElementById('risk-per-trade').value);
            var entryPrice = parseFloat(document.getElementById('risk-entry-price').value);
            var stopLoss = parseFloat(document.getElementById('risk-stop-loss').value);
            
            if (isNaN(capital) || isNaN(riskPerTrade) || isNaN(entryPrice) || isNaN(stopLoss)) {
                showNotification(translations[currentLanguage].loading, 'error');
                return;
            }
            
            var riskAmount = capital * (riskPerTrade / 100);
            var priceDifference = Math.abs(entryPrice - stopLoss);
            var positionSize = riskAmount / priceDifference;
            var stopDistance = (priceDifference / entryPrice) * 100;
            
            var positionSizeResult = document.getElementById('position-size-result');
            if (positionSizeResult) positionSizeResult.textContent = positionSize.toFixed(4);
            
            var riskAmountResult = document.getElementById('risk-amount-result');
            if (riskAmountResult) riskAmountResult.textContent = '$' + riskAmount.toFixed(2);
            
            var stopDistanceResult = document.getElementById('stop-distance-result');
            if (stopDistanceResult) stopDistanceResult.textContent = stopDistance.toFixed(2) + '%';
            
            var riskResults = document.getElementById('risk-results');
            if (riskResults) riskResults.classList.remove('hidden');
        }
        
        // ========================
        // ВСПОМОГАТЕЛЬНЫЕ ФУНКЦИИ
        // ========================
        
        // Обновление индекса страха и жадности
        function updateFearGreedIndex() {
            fetch('https://api.alternative.me/fng/?limit=1')
                .then(function(res) { return res.json(); })
                .then(function(data) {
                    var index = parseInt(data.data[0].value);
                    
                    var indicator = document.getElementById('fearGreedIndicator');
                    var valueElem = document.getElementById('fearGreedValue');
                    var textElem = document.getElementById('fearGreedText');
                    
                    var container = document.querySelector('.fear-greed-container');
                    if (container && indicator && valueElem && textElem) {
                        var containerWidth = container.offsetWidth;
                        indicator.style.left = Math.min(Math.max((index / 100) * containerWidth, 2), containerWidth - 2) + 'px';
                        
                        valueElem.textContent = index;
                        var statusText = '';
                        var textColor = '';
                        if(index <= 25) {
                            statusText = translations[currentLanguage].extreme_fear;
                            textColor = 'text-red-500';
                        }
                        else if(index <= 45) {
                            statusText = translations[currentLanguage].fear;
                            textColor = 'text-orange-500';
                        }
                        else if(index <= 55) {
                            statusText = translations[currentLanguage].neutral;
                            textColor = 'text-yellow-500';
                        }
                        else if(index <= 75) {
                            statusText = translations[currentLanguage].greed;
                            textColor = 'text-green-500';
                        }
                        else {
                            statusText = translations[currentLanguage].extreme_greed;
                            textColor = 'text-emerald-500';
                        }
                        
                        textElem.textContent = statusText;
                        textElem.className = textColor;
                    }
                })
                .catch(function(error) {
                    console.error('Failed to fetch Fear & Greed Index:', error);
                    var textElem = document.getElementById('fearGreedText');
                    if (textElem) textElem.textContent = translations[currentLanguage].loading;
                });
        };

        // Получение крипто-новостей
        function fetchCryptoNews() {
            fetch('https://api.rss2json.com/v1/api.json?rss_url=https://cointelegraph.com/rss')
                .then(function(res) {
                    if (!res.ok) throw new Error(translations[currentLanguage].network_error);
                    return res.json();
                })
                .then(function(data) {
                    if (!data.items) throw new Error(translations[currentLanguage].news_error);

                    var container = document.getElementById('news-container');
                    if (!container) return;
                    
                    container.innerHTML = data.items.slice(0, 5).map(function(item) {
                        return `
                            <div class="bg-gray-800 p-3 rounded-lg mb-2">
                                <a href="${item.link}" target="_blank" rel="noopener" class="text-blue-400 hover:underline font-medium">${item.title}</a>
                                <div class="text-gray-400 text-sm mt-1">${new Date(item.pubDate).toLocaleString()}</div>
                            </div>
                        `;
                    }).join('');

                })
                .catch(function(error) {
                    console.error('Error:', error);
                    var container = document.getElementById('news-container');
                    if (container) {
                        container.innerHTML = `
                            <div class="text-red-500">${translations[currentLanguage].news_error}</div>
                        `;
                    }
                });
        }
        
        // Показ уведомлений
        function showNotification(message, type) {
            if (type === undefined) type = 'info';
            var container = document.getElementById('notifications-container');
            if (!container) return;
            
            var notification = document.createElement('div');
            
            var bgColor = 'bg-blue-900';
            if (type === 'success') bgColor = 'bg-green-900';
            if (type === 'warning') bgColor = 'bg-yellow-900';
            if (type === 'error') bgColor = 'bg-red-900';
            if (type === 'alert') bgColor = 'bg-purple-900';
            
            notification.className = bgColor + " text-white p-4 rounded-lg mb-2 flex items-center";
            notification.innerHTML = `
                <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : type === 'warning' ? 'exclamation-triangle' : 'info-circle'} mr-3"></i>
                <div>${message}</div>
            `;
            
            container.appendChild(notification);
            
            // Автоудаление через 5 секунд
            setTimeout(function() {
                notification.style.opacity = '0';
                setTimeout(function() { notification.remove(); }, 300);
            }, 5000);
        }
        
        // Обновление графиков портфеля
        function updatePortfolioChart() {
            var ctx = document.getElementById('portfolio-distribution');
            if (!ctx || portfolio.length === 0) return;
            ctx = ctx.getContext('2d');
            
            var labels = portfolio.map(function(a) { return a.symbol.replace('USDT', ''); });
            var data = portfolio.map(function(a) {
                var token = allTokensData.find(function(t) { return t.symbol === a.symbol; }) || {};
                var currentPrice = parseFloat(token.lastPrice) || 0;
                return currentPrice * a.amount;
            });
            
            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: labels,
                    datasets: [{
                        data: data,
                        backgroundColor: [
                            '#3b82f6', '#ef4444', '#10b981', '#f59e0b', 
                            '#8b5cf6', '#ec4899', '#06b6d4', '#f97316'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'bottom',
                        }
                    }
                }
            });
        }
        
        // Переключение темы
        function toggleTheme() {
            isDarkMode = !isDarkMode;
            localStorage.setItem('darkMode', isDarkMode);
            
            // Применяем классы к корневому элементу
            document.documentElement.classList.toggle('dark', isDarkMode);
            document.documentElement.classList.toggle('light', !isDarkMode);
            
            // Перерисовываем тепловую карту
            updateHeatmap();
            
            // Перерисовываем модальное окно, если оно открыто
            if (!document.getElementById('modal').classList.contains('hidden')) {
                initTradingViewChart("modalChartTV", currentSymbol, currentTimeframe);
            }
        };
        
        // Открытие модального окна добавления актива
        function openAddAssetModal() {
            var modal = document.getElementById('add-asset-modal');
            if (modal) modal.classList.remove('hidden');
            
            // Очищаем предыдущий выбор
            var assetForm = document.getElementById('asset-form');
            if (assetForm) assetForm.classList.add('hidden');
            
            var assetSearch = document.getElementById('asset-search');
            if (assetSearch) assetSearch.value = '';
            
            // Заполняем список токенов
            var assetsList = document.getElementById('assets-list');
            if (!assetsList) return;
            
            assetsList.innerHTML = '';
            
            // Показываем топ 300 токенов
            var topTokens = allTokensData.slice(0, 300);
            
            topTokens.forEach(function(token) {
                var symbol = token.symbol.replace('USDT', '');
                var assetDiv = document.createElement('div');
                assetDiv.className = 'asset-item';
                assetDiv.innerHTML = `
                    <img src="${getTokenIconURL(token.symbol)}" 
                         alt="${symbol}" 
                         class="w-6 h-6"
                         onerror="handleIconError(this, '${symbol}')">
                    <span>${symbol}</span>
                `;
                
                assetDiv.onclick = function() { selectAsset(token.symbol); };
                assetsList.appendChild(assetDiv);
            });
            
            // Настройка поиска
            if (assetSearch) {
                assetSearch.addEventListener('input', function(e) {
                    var searchTerm = e.target.value.toUpperCase();
                    var items = assetsList.querySelectorAll('.asset-item');
                    
                    items.forEach(function(item) {
                        var symbol = item.querySelector('span').textContent;
                        if (symbol.indexOf(searchTerm) !== -1) {
                            item.style.display = 'flex';
                        } else {
                            item.style.display = 'none';
                        }
                    });
                });
            }
        }
        
        // Закрытие модального окна добавления актива
        function closeAddAssetModal() {
            var modal = document.getElementById('add-asset-modal');
            if (modal) modal.classList.add('hidden');
        }

        // Выбор актива в модальном окне
        function selectAsset(symbol) {
            var selectedAsset = document.getElementById('selected-asset');
            if (selectedAsset) selectedAsset.textContent = symbol.replace('USDT', '');
            
            var assetForm = document.getElementById('asset-form');
            if (assetForm) assetForm.classList.remove('hidden');
            
            // Автозаполнение текущей цены
            var token = allTokensData.find(function(t) { return t.symbol === symbol; });
            var assetPrice = document.getElementById('asset-price');
            if (assetPrice && token) {
                assetPrice.value = parseFloat(token.lastPrice).toFixed(8);
            }
            
            // Обработчик подтверждения
            var confirmBtn = document.getElementById('confirm-add-asset');
            if (confirmBtn) {
                confirmBtn.onclick = function() {
                    var amount = parseFloat(document.getElementById('asset-amount').value);
                    var entryPrice = parseFloat(document.getElementById('asset-price').value);
                    
                    if (isNaN(amount) || isNaN(entryPrice)) {
                        showNotification(translations[currentLanguage].loading, 'error');
                        return;
                    }
                    
                    addAsset(symbol, amount, entryPrice);
                    closeAddAssetModal();
                };
            }
        }
        
        // Настройка обработчиков событий
        function setupEventListeners() {
            // Навигация по страницам
            var tabs = document.querySelectorAll('.tab');
            tabs.forEach(function(tab) {
                tab.addEventListener('click', function() {
                    var page = tab.dataset.page;
                    
                    // Обновляем активную страницу
                    tabs.forEach(function(t) { t.classList.remove('active'); });
                    var pages = document.querySelectorAll('.page');
                    pages.forEach(function(p) { p.classList.remove('active'); });
                    
                    tab.classList.add('active');
                    var pageEl = document.getElementById(page);
                    if (pageEl) pageEl.classList.add('active');
                    currentPage = page;
                });
            });
            
            // Переключение вида
            var viewToggle = document.getElementById("viewToggle");
            if (viewToggle) {
                viewToggle.addEventListener('click', function() {
                    cardView = !cardView;
                    updateUI();
                    updateViewToggleButton();
                });
            }
            
            // Фильтры
            var filterSelect = document.getElementById("filter-select");
            if (filterSelect) {
                filterSelect.addEventListener('change', updateUI);
            }
            
            var searchInput = document.getElementById("searchInput");
            if (searchInput) {
                searchInput.addEventListener('input', updateUI);
            }
            
            // Тепловая карта
            var heatmapVolumeBtn = document.getElementById("heatmapVolumeBtn");
            if (heatmapVolumeBtn) {
                heatmapVolumeBtn.addEventListener('click', function() {
                    heatmapType = 'volume';
                    updateHeatmap();
                });
            }
            
            var heatmapChangeBtn = document.getElementById("heatmapChangeBtn");
            if (heatmapChangeBtn) {
                heatmapChangeBtn.addEventListener('click', function() {
                    heatmapType = 'change';
                    updateHeatmap();
                });
            }
            
            // Тема
            var themeToggle = document.getElementById("themeToggle");
            if (themeToggle) {
                themeToggle.addEventListener('click', toggleTheme);
            }
            
            // Портфель
            var addAssetBtn = document.getElementById('add-asset-btn');
            if (addAssetBtn) {
                addAssetBtn.addEventListener('click', openAddAssetModal);
            }
            
            // Алерты
            var addAlertBtn = document.getElementById('add-alert-btn');
            if (addAlertBtn) {
                addAlertBtn.addEventListener('click', function() {
                    var rawSymbol = document.getElementById('alert-asset-search').value.trim().toUpperCase();
                    if (!rawSymbol) {
                        showNotification(translations[currentLanguage].token, 'error');
                        return;
                    }
                    var symbol = rawSymbol.endsWith('USDT') ? rawSymbol : rawSymbol + 'USDT';
                    var targetPrice = parseFloat(document.getElementById('alert-price').value);
                    var condition = document.getElementById('alert-condition').value;
                    
                    if (isNaN(targetPrice)) {
                        showNotification(translations[currentLanguage].target_price, 'error');
                        return;
                    }
                    
                    addAlert(symbol, targetPrice, condition);
                });
            }

            // Обработчик поиска для алертов
            var alertAssetSearch = document.getElementById('alert-asset-search');
            if (alertAssetSearch) {
                alertAssetSearch.addEventListener('input', function(e) {
                    var searchTerm = e.target.value.toUpperCase();
                    var assetsList = document.getElementById('alert-assets-list');
                    if (!assetsList) return;
                    
                    assetsList.innerHTML = '';
                    assetsList.classList.remove('hidden');
                    
                    if (searchTerm.length < 2) {
                        assetsList.classList.add('hidden');
                        return;
                    }
                    
                    var filteredTokens = allTokensData.filter(function(token) {
                        return token.symbol.indexOf(searchTerm) !== -1;
                    }).slice(0, 10);
                    
                    if (filteredTokens.length === 0) {
                        assetsList.innerHTML = '<div class="p-2 text-gray-500">No tokens found</div>';
                        return;
                    }
                    
                    filteredTokens.forEach(function(token) {
                        var div = document.createElement('div');
                        div.className = 'token-selector-item';
                        div.innerHTML = `
                            <img src="${getTokenIconURL(token.symbol)}" 
                                 alt="${token.symbol}" 
                                 class="w-6 h-6"
                                 onerror="handleIconError(this, '${token.symbol.replace('USDT','')}')">
                            <span>${token.symbol.replace('USDT','')}</span>
                        `;
                        div.onclick = function() {
                            document.getElementById('alert-asset-search').value = token.symbol.replace('USDT', '');
                            assetsList.classList.add('hidden');
                        };
                        assetsList.appendChild(div);
                    });
                });
            }
            
            // Инструменты
            var calculateBtn = document.getElementById('calculate-btn');
            if (calculateBtn) {
                calculateBtn.addEventListener('click', calculatePosition);
            }
            
            var calculateRiskBtn = document.getElementById('calculate-risk-btn');
            if (calculateRiskBtn) {
                calculateRiskBtn.addEventListener('click', calculateRisk);
            }
            
            // Закрытие модального окна
            var closeModal = document.getElementById("closeModal");
            if (closeModal) {
                closeModal.addEventListener('click', function() {
                    var modal = document.getElementById("modal");
                    if (modal) modal.classList.add("hidden");
                    var container = document.getElementById("modalChartTV");
                    if (container) container.innerHTML = '';
                    
                    // Закрываем вебсокет
                    if (chartWebSocket) {
                        chartWebSocket.close();
                        chartWebSocket = null;
                    }
                });
            }
            
            // Кнопка TradingView
            var tradingViewBtn = document.getElementById("tradingViewBtn");
            if (tradingViewBtn) {
                tradingViewBtn.addEventListener('click', function() {
                    var tradingViewSymbol = currentSymbol.endsWith('USDT') ? 
                        currentSymbol.replace('USDT', '') : 
                        currentSymbol;
                    window.open(
                        "https://www.tradingview.com/chart/?symbol=BINANCE:" + tradingViewSymbol + "USDT",
                        '_blank'
                    );
                });
            }
            
            // Обработчики для кнопок таймфреймов
            document.addEventListener('click', function(e) {
                if (e.target.classList.contains('timeframe-btn')) {
                    e.stopPropagation();
                    var buttons = document.querySelectorAll('.timeframe-btn');
                    buttons.forEach(function(b) { b.classList.remove('active'); });
                    e.target.classList.add('active');
                    var timeframe = e.target.dataset.tf;
                    initTradingViewChart("modalChartTV", currentSymbol, timeframe);
                }
            });
            
            // Изменение языка
            var languageSelect = document.getElementById('languageSelect');
            if (languageSelect) {
                languageSelect.addEventListener('change', function(e) {
                    currentLanguage = e.target.value;
                    translatePage(currentLanguage);
                    updateViewToggleButton(); // Обновляем текст кнопки
                });
            }
        } 

        // Массив бирж с реферальными ссылками
        const exchanges = [
          {
            name: {
              en: "Bybit",
              ua: "Байбіт",
              ru: "Байбит"
            },
            url: "https://bybit.com/ru-RU/invite?ref=3EVP8EE&utm_source=CryptoRadar",
            bonus: {
              en: "Get up to $500 bonus when registering!",
              ua: "Отримай до $500 бонусу при реєстрації!",
              ru: "Получи до $500 бонуса при регистрации!"
            }
          },
          {
            name: {
              en: "OKX",
              ua: "ОКХ",
              ru: "ОКХ"
            },
            url: "https://okx.com/join/45675556?utm_source=CryptoRadar",
            bonus: {
              en: "20% discount on commissions + giveaways",
              ua: "Знижка на комісію 20% + розіграші",
              ru: "Скидка на комиссию 20% + розыгрыши"
            }
          },
          {
            name: {
              en: "Binance",
              ua: "Бінанс",
              ru: "Бинанс"
            },
            url: "https://www.binance.com/activity/referral-entry/CPA?ref=CPA_0036WCZERW",
            bonus: {
              en: "10% cashback from every commission",
              ua: "10% кешбек з кожної комісії",
              ru: "10% кешбек с каждой комиссии"
            }
          },
          {
            name: {
              en: "Bitget",
              ua: "Бітґет",
              ru: "Битгет"
            },
            url: "https://www.bitgetapp.com/ru/referral/register?clacCode=ZXCX2PKZ&utm_source=CryptoRadar",
            bonus: {
              en: "Bonuses up to $4000 on first deposit",
              ua: "Бонуси до $4000 на перший депозит",
              ru: "Бонусы до $4000 на первый депозит"
            }
          },
          {
            name: {
              en: "KuCoin",
              ua: "Кукоїн",
              ru: "Кукоин"
            },
            url: "https://www.kucoin.com/ucenter/signup?rcode=Z6CDCWDA&utm_source=c_k_share&utm_campaign=CryptoRadar",
            bonus: {
              en: "20% discount on trading commissions",
              ua: "20% знижка на трейдинг комісії",
              ru: "20% скидка на трейдинг комиссии"
            }
          },
          {
            name: {
              en: "MEXC",
              ua: "МЕХС",
              ru: "МЕХС"
            },
            url: "https://promote.mexc.com/r/t6boLrCn",
            bonus: {
              en: "$50 bonus + 0% spot commission!",
              ua: "50$ бонус + 0% комісія на спот!",
              ru: "50$ бонус + 0% комиссия на спот!"
            }
          },
          {
            name: {
              en: "BingX",
              ua: "БінгХ",
              ru: "БингХ"
            },
            url: "https://bingx.com/invite/RUJECH/",
            bonus: {
              en: "$5 bonus for newcomers",
              ua: "5 USDT бонус новачку",
              ru: "5 USDT бонус новичку"
            }
          },
          {
            name: {
              en: "WEEX",
              ua: "ВІІХ",
              ru: "ВИИХ"
            },
            url: "https://weex.com/register?vipCode=6u4an",
            bonus: {
              en: "Welcome bonus up to 100 USDT",
              ua: "Вітальний бонус до 100 USDT",
              ru: "Приветственный бонус до 100 USDT"
            }
          },
          {
            name: {
              en: "BitMart",
              ua: "БітМарт",
              ru: "БитМарт"
            },
            url: "https://www.bitmart.com/invite/cpRBXD/ru",
            bonus: {
              en: "Access to early tokens + bonus",
              ua: "Доступ до ранніх токенів + бонус",
              ru: "Доступ к ранним токенам + бонус"
            }
          },
          {
            name: {
              en: "CoinEx",
              ua: "КойнЕкс",
              ru: "КойнЭкс"
            },
            url: "https://www.coinex.com/register?refer_code=t74ax&channel=Referral",
            bonus: {
              en: "Get bonuses for trading and partnership",
              ua: "Отримай бонуси за трейдинг та партнерку",
              ru: "Получи бонусы за трейдинг и партнерство"
            }
          }
        ];

        // Инициализация ротации баннеров с поддержкой языка
        function initBannerRotation() {
          let current = 0;
          const linkEl = document.getElementById("rotatingLink");
          const nameEl = document.getElementById("exchangeName");
          const bonusEl = document.getElementById("exchangeBonus");

          if (!linkEl || !nameEl || !bonusEl) return;

          // Функция обновления текста баннера
          function updateBannerText() {
            const ex = exchanges[current];
            linkEl.href = ex.url;
            nameEl.textContent = `🔥 ${ex.name[currentLanguage] || ex.name.en}`;
            bonusEl.textContent = ex.bonus[currentLanguage] || ex.bonus.en;
          }

          function showNext() {
            current = (current + 1) % exchanges.length;
            updateBannerText();
          }

          // Инициализируем первый баннер
          updateBannerText();
          
          // Запускаем ротацию
          bannerInterval = setInterval(showNext, 4000);
          
          // Возвращаем функцию для обновления при смене языка
          return updateBannerText;
        }

        // Инициализация при загрузке
        document.addEventListener('DOMContentLoaded', function() {
          let updateBannerText; // Переменная для хранения функции обновления
          
          // Установка темы
          document.documentElement.classList.toggle('dark', isDarkMode);
          document.documentElement.classList.toggle('light', !isDarkMode);
          
          // Применяем перевод
          var savedLang = localStorage.getItem('language') || 'en';
          document.getElementById('languageSelect').value = savedLang;
          translatePage(savedLang);
          
          // Проверка разрешения на уведомления
          if (Notification.permission !== 'granted' && Notification.permission !== 'denied') {
              Notification.requestPermission();
          }
          
          // Обновляем текст кнопки вида
          updateViewToggleButton();
          
          // Загрузка данных
          updateUI();
          updateFearGreedIndex();
          fetchCryptoNews();
          renderPortfolio();
          renderAlerts();
          
          // Настройка обработчиков событий
          setupEventListeners();
          
          // Инициализация ротации баннеров
          updateBannerText = initBannerRotation();
          
          // Запуск периодических обновлений
          setInterval(updateUI, 30000);
          setInterval(updateFearGreedIndex, 30000);
          setInterval(checkAlerts, 60000);
          
          // Обработчик изменения языка для баннера
          document.getElementById('languageSelect').addEventListener('change', function(e) {
            currentLanguage = e.target.value;
            translatePage(currentLanguage);
            updateViewToggleButton();
            
            // Обновляем баннер при смене языка
            if (updateBannerText) updateBannerText();
          });
        });
    </script>
</body>
</html>
